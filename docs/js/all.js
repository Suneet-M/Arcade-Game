"use strict";!function(){var n={},i=[];function t(e){if(n[e])return n[e];var t=new Image;t.onload=function(){n[e]=t,s()&&i.forEach(function(e){e()})},n[e]=!1,t.src=e}function s(){var e=!0;for(var t in n)n.hasOwnProperty(t)&&!n[t]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){t(e)}):t(e)},get:function(e){return n[e]},onReady:function(e){i.push(e)},isReady:s}}();var Engine=function(e){var n,i,t=e.document,s=e.window,r=t.createElement("canvas"),o=r.getContext("2d");function a(){var t,e=Date.now();t=(e-n)/1e3,allEnemies.forEach(function(e){e.update(t)}),function(){var e,t,n=["img/water-block.png","img/stone-block.png","img/stone-block.png","img/stone-block.png","img/grass-block.png","img/grass-block.png"];for(o.clearRect(0,0,r.width,r.height),e=0;e<6;e++)for(t=0;t<5;t++)o.drawImage(Resources.get(n[e]),101*t,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),n=e,player.win||player.lose?s.cancelAnimationFrame(i):i=s.requestAnimationFrame(a)}return r.width=505,r.height=600,t.body.appendChild(r),Resources.load(["img/stone-block.png","img/water-block.png","img/grass-block.png","img/enemy-bug.png","img/char-boy.png"]),Resources.onReady(function(){n=Date.now(),a()}),e.ctx=o,{start:a}}(window);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Enemy=function(){function i(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-120;_classCallCheck(this,i),this.sprite="img/enemy-bug.png",this.startX=n,this.x=this.startX,this.y=t,this.sp=e,this.random=100}return _createClass(i,[{key:"update",value:function(e){this.x+=this.sp*this.random*e,520<=this.x&&(this.x=this.startX,this.random=100*Math.random()+100),checkCollision(this),checkWin()}},{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}},{key:"endX",get:function(){return this.x+tileWidth}},{key:"endY",get:function(){return this.y+tileHeight}}]),i}(),Player=function(){function e(){_classCallCheck(this,e),this.sprite="img/char-boy.png",this.startX=200,this.startY=375,this.x=this.startX,this.y=this.startY,this.win=!1,this.lose=!1}return _createClass(e,[{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}},{key:"handleInput",value:function(e){switch(e){case"left":-2===this.x||(this.x-=tileWidth);break;case"up":-40===this.y||(this.y-=tileHeight);break;case"down":375===this.y||(this.y+=tileHeight);break;case"right":402===this.x||(this.x+=tileWidth)}}},{key:"feetY",get:function(){return this.y+tileHeight}},{key:"feetX",get:function(){return this.x+tileWidth/2}}]),e}(),allEnemies=[new Enemy(1.5,64),new Enemy(3,64,-550),new Enemy(6,64,-1e3),new Enemy(2,147),new Enemy(1.2,147,-200),new Enemy(3,147,-800),new Enemy(1,230),new Enemy(2.2,230,-450)],player=new Player,tileWidth=101,tileHeight=83;function checkCollision(e){player.feetX<=e.endX&&player.feetX>=e.x&&player.feetY<=e.endY&&player.feetY>=e.y&&(resetPlayer(),reduceLives())}function resetPlayer(){player.x=player.startX,player.y=player.startY}document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var lives=Array.from(document.querySelectorAll(".fa-heart")),i=lives.length;function reduceLives(){lives[--i].classList.remove("fas"),lives[i].classList.add("far"),checkLose()}function checkWin(){-40==player.y&&gameWin()}function gameWin(){player.win=!0,num=0,showModal()}function checkLose(){0==i&&gameLose()}function gameLose(){player.lose=!0,num=1,showModal()}function resetLives(){for(i=0;i<lives.length;i++)lives[i].classList.add("fas")}function resetGame(){player.win=!1,player.lose=!1,resetPlayer(),resetLives(),hideModal(),Engine.start()}var num,modalBack=document.querySelector(".modal-back"),modalBody=Array.from(document.querySelectorAll(".modal-body")),closeButtons=Array.from(document.querySelectorAll(".close")),resetButtons=Array.from(document.querySelectorAll(".reset"));function showModal(){modalBack.classList.add("show"),modalBody[num].classList.add("show"),0==num?modalBody[num].classList.add("tada"):modalBody[num].classList.add("wobble"),document.querySelector(".content").innerHTML=document.querySelector(".score-panel").innerHTML,toggleListeners("on"),resetButtons[num].focus()}function hideModal(){modalBody[num].classList.add("bounceOut"),setTimeout(function(){modalBody[num].classList.remove("show","tada","wobble","bounceOut"),modalBack.classList.remove("show")},780),toggleListeners("off")}function toggleListeners(e){switch(e){case"on":closeButtons[num].addEventListener("click",hideModal),resetButtons[num].addEventListener("click",resetGame);break;case"off":closeButtons[num].removeEventListener("click",hideModal),resetButtons[num].removeEventListener("click",resetGame)}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc291cmNlcy5qcyIsImVuZ2luZS5qcyIsImFwcC5qcyJdLCJuYW1lcyI6WyJyZXNvdXJjZUNhY2hlIiwicmVhZHlDYWxsYmFja3MiLCJfbG9hZCIsInVybCIsImltZyIsIkltYWdlIiwib25sb2FkIiwiaXNSZWFkeSIsImZvckVhY2giLCJmdW5jIiwic3JjIiwicmVhZHkiLCJrIiwiaGFzT3duUHJvcGVydHkiLCJ3aW5kb3ciLCJSZXNvdXJjZXMiLCJsb2FkIiwidXJsT3JBcnIiLCJBcnJheSIsImdldCIsIm9uUmVhZHkiLCJwdXNoIiwiRW5naW5lIiwiZ2xvYmFsIiwibGFzdFRpbWUiLCJpZCIsImRvYyIsImRvY3VtZW50Iiwid2luIiwiY2FudmFzIiwiY3JlYXRlRWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJtYWluIiwiZHQiLCJub3ciLCJEYXRlIiwiYWxsRW5lbWllcyIsImVuZW15IiwidXBkYXRlIiwicm93IiwiY29sIiwicm93SW1hZ2VzIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJkcmF3SW1hZ2UiLCJyZW5kZXIiLCJwbGF5ZXIiLCJsb3NlIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJzdGFydCIsIkVuZW15Iiwic3BlZWQiLCJ5IiwieCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJzcHJpdGUiLCJzdGFydFgiLCJzcCIsInJhbmRvbSIsIk1hdGgiLCJjaGVja0NvbGxpc2lvbiIsImNoZWNrV2luIiwidGlsZVdpZHRoIiwidGlsZUhlaWdodCIsIlBsYXllciIsInN0YXJ0WSIsImtleSIsImZlZXRYIiwiZW5kWCIsImZlZXRZIiwiZW5kWSIsInJlc2V0UGxheWVyIiwicmVkdWNlTGl2ZXMiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImhhbmRsZUlucHV0IiwiMzciLCIzOCIsIjM5IiwiNDAiLCJrZXlDb2RlIiwibGl2ZXMiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJjaGVja0xvc2UiLCJnYW1lV2luIiwibnVtIiwic2hvd01vZGFsIiwiZ2FtZUxvc2UiLCJyZXNldExpdmVzIiwicmVzZXRHYW1lIiwiaGlkZU1vZGFsIiwibW9kYWxCYWNrIiwicXVlcnlTZWxlY3RvciIsIm1vZGFsQm9keSIsImNsb3NlQnV0dG9ucyIsInJlc2V0QnV0dG9ucyIsImlubmVySFRNTCIsInRvZ2dsZUxpc3RlbmVycyIsImZvY3VzIiwic2V0VGltZW91dCIsInN3IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJtYXBwaW5ncyI6IkFBQUEsY0FPQSxXQUNDLElBQUlBLEVBQWdCLEdBQ2hCQyxFQUFpQixHQTJCckIsU0FBU0MsRUFBTUMsR0FDZCxHQUFHSCxFQUFjRyxHQUtoQixPQUFPSCxFQUFjRyxHQUtyQixJQUFJQyxFQUFNLElBQUlDLE1BQ2RELEVBQUlFLE9BQVMsV0FLWk4sRUFBY0csR0FBT0MsRUFJbEJHLEtBQ0ZOLEVBQWVPLFFBQVEsU0FBU0MsR0FBUUEsT0FRMUNULEVBQWNHLElBQU8sRUFDckJDLEVBQUlNLElBQU1QLEVBZVosU0FBU0ksSUFDUixJQUFJSSxHQUFRLEVBQ1osSUFBSSxJQUFJQyxLQUFLWixFQUNUQSxFQUFjYSxlQUFlRCxLQUM5QlosRUFBY1ksS0FDZkQsR0FBUSxHQUdWLE9BQU9BLEVBYVJHLE9BQU9DLFVBQVksQ0FDbEJDLEtBekZELFNBQWNDLEdBQ1ZBLGFBQW9CQyxNQUt0QkQsRUFBU1QsUUFBUSxTQUFTTCxHQUN6QkQsRUFBTUMsS0FPUEQsRUFBTWUsSUE0RVBFLElBOUJELFNBQWFoQixHQUNaLE9BQU9ILEVBQWNHLElBOEJyQmlCLFFBVkQsU0FBaUJYLEdBQ2hCUixFQUFlb0IsS0FBS1osSUFVcEJGLFFBQVNBLEdBcEdYLEdDU0EsSUFBSWUsT0FBVSxTQUFTQyxHQUt0QixJQUlDQyxFQUNBQyxFQUxHQyxF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c0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG4vKiBSZXNvdXJjZXMuanNcclxuICogVGhpcyBpcyBzaW1wbHkgYW4gaW1hZ2UgbG9hZGluZyB1dGlsaXR5LiBJdCBlYXNlcyB0aGUgcHJvY2VzcyBvZiBsb2FkaW5nXHJcbiAqIGltYWdlIGZpbGVzIHNvIHRoYXQgdGhleSBjYW4gYmUgdXNlZCB3aXRoaW4geW91ciBnYW1lLiBJdCBhbHNvIGluY2x1ZGVzXHJcbiAqIGEgc2ltcGxlIFwiY2FjaGluZ1wiIGxheWVyIHNvIGl0IHdpbGwgcmV1c2UgY2FjaGVkIGltYWdlcyBpZiB5b3UgYXR0ZW1wdFxyXG4gKiB0byBsb2FkIHRoZSBzYW1lIGltYWdlIG11bHRpcGxlIHRpbWVzLlxyXG4gKi9cclxuKGZ1bmN0aW9uKCkge1xyXG5cdHZhciByZXNvdXJjZUNhY2hlID0ge307XHJcblx0dmFyIHJlYWR5Q2FsbGJhY2tzID0gW107XHJcblxyXG5cdC8qIFRoaXMgaXMgdGhlIHB1YmxpY2x5IGFjY2Vzc2libGUgaW1hZ2UgbG9hZGluZyBmdW5jdGlvbi4gSXQgYWNjZXB0c1xyXG5cdCAqIGFuIGFycmF5IG9mIHN0cmluZ3MgcG9pbnRpbmcgdG8gaW1hZ2UgZmlsZXMgb3IgYSBzdHJpbmcgZm9yIGEgc2luZ2xlXHJcblx0ICogaW1hZ2UuIEl0IHdpbGwgdGhlbiBjYWxsIG91ciBwcml2YXRlIGltYWdlIGxvYWRpbmcgZnVuY3Rpb24gYWNjb3JkaW5nbHkuXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gbG9hZCh1cmxPckFycikge1xyXG5cdFx0aWYodXJsT3JBcnIgaW5zdGFuY2VvZiBBcnJheSkge1xyXG5cdFx0XHQvKiBJZiB0aGUgZGV2ZWxvcGVyIHBhc3NlZCBpbiBhbiBhcnJheSBvZiBpbWFnZXNcclxuXHRcdFx0ICogbG9vcCB0aHJvdWdoIGVhY2ggdmFsdWUgYW5kIGNhbGwgb3VyIGltYWdlXHJcblx0XHRcdCAqIGxvYWRlciBvbiB0aGF0IGltYWdlIGZpbGVcclxuXHRcdFx0ICovXHJcblx0XHRcdHVybE9yQXJyLmZvckVhY2goZnVuY3Rpb24odXJsKSB7XHJcblx0XHRcdFx0X2xvYWQodXJsKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvKiBUaGUgZGV2ZWxvcGVyIGRpZCBub3QgcGFzcyBhbiBhcnJheSB0byB0aGlzIGZ1bmN0aW9uLFxyXG5cdFx0XHQgKiBhc3N1bWUgdGhlIHZhbHVlIGlzIGEgc3RyaW5nIGFuZCBjYWxsIG91ciBpbWFnZSBsb2FkZXJcclxuXHRcdFx0ICogZGlyZWN0bHkuXHJcblx0XHRcdCAqL1xyXG5cdFx0XHRfbG9hZCh1cmxPckFycik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKiBUaGlzIGlzIG91ciBwcml2YXRlIGltYWdlIGxvYWRlciBmdW5jdGlvbiwgaXQgaXNcclxuXHQgKiBjYWxsZWQgYnkgdGhlIHB1YmxpYyBpbWFnZSBsb2FkZXIgZnVuY3Rpb24uXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gX2xvYWQodXJsKSB7XHJcblx0XHRpZihyZXNvdXJjZUNhY2hlW3VybF0pIHtcclxuXHRcdFx0LyogSWYgdGhpcyBVUkwgaGFzIGJlZW4gcHJldmlvdXNseSBsb2FkZWQgaXQgd2lsbCBleGlzdCB3aXRoaW5cclxuXHRcdFx0ICogb3VyIHJlc291cmNlQ2FjaGUgYXJyYXkuIEp1c3QgcmV0dXJuIHRoYXQgaW1hZ2UgcmF0aGVyXHJcblx0XHRcdCAqIHJlLWxvYWRpbmcgdGhlIGltYWdlLlxyXG5cdFx0XHQgKi9cclxuXHRcdFx0cmV0dXJuIHJlc291cmNlQ2FjaGVbdXJsXTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8qIFRoaXMgVVJMIGhhcyBub3QgYmVlbiBwcmV2aW91c2x5IGxvYWRlZCBhbmQgaXMgbm90IHByZXNlbnRcclxuXHRcdFx0ICogd2l0aGluIG91ciBjYWNoZTsgd2UnbGwgbmVlZCB0byBsb2FkIHRoaXMgaW1hZ2UuXHJcblx0XHRcdCAqL1xyXG5cdFx0XHR2YXIgaW1nID0gbmV3IEltYWdlKCk7XHJcblx0XHRcdGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvKiBPbmNlIG91ciBpbWFnZSBoYXMgcHJvcGVybHkgbG9hZGVkLCBhZGQgaXQgdG8gb3VyIGNhY2hlXHJcblx0XHRcdFx0ICogc28gdGhhdCB3ZSBjYW4gc2ltcGx5IHJldHVybiB0aGlzIGltYWdlIGlmIHRoZSBkZXZlbG9wZXJcclxuXHRcdFx0XHQgKiBhdHRlbXB0cyB0byBsb2FkIHRoaXMgZmlsZSBpbiB0aGUgZnV0dXJlLlxyXG5cdFx0XHRcdCAqL1xyXG5cdFx0XHRcdHJlc291cmNlQ2FjaGVbdXJsXSA9IGltZztcclxuXHRcdFx0XHQvKiBPbmNlIHRoZSBpbWFnZSBpcyBhY3R1YWxseSBsb2FkZWQgYW5kIHByb3Blcmx5IGNhY2hlZCxcclxuXHRcdFx0XHQgKiBjYWxsIGFsbCBvZiB0aGUgb25SZWFkeSgpIGNhbGxiYWNrcyB3ZSBoYXZlIGRlZmluZWQuXHJcblx0XHRcdFx0ICovXHJcblx0XHRcdFx0aWYoaXNSZWFkeSgpKSB7XHJcblx0XHRcdFx0XHRyZWFkeUNhbGxiYWNrcy5mb3JFYWNoKGZ1bmN0aW9uKGZ1bmMpIHsgZnVuYygpOyB9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHQvKiBTZXQgdGhlIGluaXRpYWwgY2FjaGUgdmFsdWUgdG8gZmFsc2UsIHRoaXMgd2lsbCBjaGFuZ2Ugd2hlblxyXG5cdFx0XHQgKiB0aGUgaW1hZ2UncyBvbmxvYWQgZXZlbnQgaGFuZGxlciBpcyBjYWxsZWQuIEZpbmFsbHksIHBvaW50XHJcblx0XHRcdCAqIHRoZSBpbWFnZSdzIHNyYyBhdHRyaWJ1dGUgdG8gdGhlIHBhc3NlZCBpbiBVUkwuXHJcblx0XHRcdCAqL1xyXG5cdFx0XHRyZXNvdXJjZUNhY2hlW3VybF0gPSBmYWxzZTtcclxuXHRcdFx0aW1nLnNyYyA9IHVybDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qIFRoaXMgaXMgdXNlZCBieSBkZXZlbG9wZXJzIHRvIGdyYWIgcmVmZXJlbmNlcyB0byBpbWFnZXMgdGhleSBrbm93XHJcblx0ICogaGF2ZSBiZWVuIHByZXZpb3VzbHkgbG9hZGVkLiBJZiBhbiBpbWFnZSBpcyBjYWNoZWQsIHRoaXMgZnVuY3Rpb25zXHJcblx0ICogdGhlIHNhbWUgYXMgY2FsbGluZyBsb2FkKCkgb24gdGhhdCBVUkwuXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gZ2V0KHVybCkge1xyXG5cdFx0cmV0dXJuIHJlc291cmNlQ2FjaGVbdXJsXTtcclxuXHR9XHJcblxyXG5cdC8qIFRoaXMgZnVuY3Rpb24gZGV0ZXJtaW5lcyBpZiBhbGwgb2YgdGhlIGltYWdlcyB0aGF0IGhhdmUgYmVlbiByZXF1ZXN0ZWRcclxuXHQgKiBmb3IgbG9hZGluZyBoYXZlIGluIGZhY3QgYmVlbiBwcm9wZXJseSBsb2FkZWQuXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gaXNSZWFkeSgpIHtcclxuXHRcdHZhciByZWFkeSA9IHRydWU7XHJcblx0XHRmb3IodmFyIGsgaW4gcmVzb3VyY2VDYWNoZSkge1xyXG5cdFx0XHRpZihyZXNvdXJjZUNhY2hlLmhhc093blByb3BlcnR5KGspICYmXHJcblx0XHRcdFx0IXJlc291cmNlQ2FjaGVba10pIHtcclxuXHRcdFx0XHRyZWFkeSA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVhZHk7XHJcblx0fVxyXG5cclxuXHQvKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYWRkIGEgZnVuY3Rpb24gdG8gdGhlIGNhbGxiYWNrIHN0YWNrIHRoYXQgaXMgY2FsbGVkXHJcblx0ICogd2hlbiBhbGwgcmVxdWVzdGVkIGltYWdlcyBhcmUgcHJvcGVybHkgbG9hZGVkLlxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIG9uUmVhZHkoZnVuYykge1xyXG5cdFx0cmVhZHlDYWxsYmFja3MucHVzaChmdW5jKTtcclxuXHR9XHJcblxyXG5cdC8qIFRoaXMgb2JqZWN0IGRlZmluZXMgdGhlIHB1YmxpY2x5IGFjY2Vzc2libGUgZnVuY3Rpb25zIGF2YWlsYWJsZSB0b1xyXG5cdCAqIGRldmVsb3BlcnMgYnkgY3JlYXRpbmcgYSBnbG9iYWwgUmVzb3VyY2VzIG9iamVjdC5cclxuXHQgKi9cclxuXHR3aW5kb3cuUmVzb3VyY2VzID0ge1xyXG5cdFx0bG9hZDogbG9hZCxcclxuXHRcdGdldDogZ2V0LFxyXG5cdFx0b25SZWFkeTogb25SZWFkeSxcclxuXHRcdGlzUmVhZHk6IGlzUmVhZHlcclxuXHR9O1xyXG59KSgpO1xyXG4iLCIndXNlIHN0cmljdCc7XHJcbi8qIEVuZ2luZS5qc1xyXG4gKiBUaGlzIGZpbGUgcHJvdmlkZXMgdGhlIGdhbWUgbG9vcCBmdW5jdGlvbmFsaXR5ICh1cGRhdGUgZW50aXRpZXMgYW5kIHJlbmRlciksXHJcbiAqIGRyYXdzIHRoZSBpbml0aWFsIGdhbWUgYm9hcmQgb24gdGhlIHNjcmVlbiwgYW5kIHRoZW4gY2FsbHMgdGhlIHVwZGF0ZSBhbmRcclxuICogcmVuZGVyIG1ldGhvZHMgb24geW91ciBwbGF5ZXIgYW5kIGVuZW15IG9iamVjdHMgKGRlZmluZWQgaW4geW91ciBhcHAuanMpLlxyXG4gKlxyXG4gKiBBIGdhbWUgZW5naW5lIHdvcmtzIGJ5IGRyYXdpbmcgdGhlIGVudGlyZSBnYW1lIHNjcmVlbiBvdmVyIGFuZCBvdmVyLCBraW5kIG9mXHJcbiAqIGxpa2UgYSBmbGlwYm9vayB5b3UgbWF5IGhhdmUgY3JlYXRlZCBhcyBhIGtpZC4gV2hlbiB5b3VyIHBsYXllciBtb3ZlcyBhY3Jvc3NcclxuICogdGhlIHNjcmVlbiwgaXQgbWF5IGxvb2sgbGlrZSBqdXN0IHRoYXQgaW1hZ2UvY2hhcmFjdGVyIGlzIG1vdmluZyBvciBiZWluZ1xyXG4gKiBkcmF3biBidXQgdGhhdCBpcyBub3QgdGhlIGNhc2UuIFdoYXQncyByZWFsbHkgaGFwcGVuaW5nIGlzIHRoZSBlbnRpcmUgXCJzY2VuZVwiXHJcbiAqIGlzIGJlaW5nIGRyYXduIG92ZXIgYW5kIG92ZXIsIHByZXNlbnRpbmcgdGhlIGlsbHVzaW9uIG9mIGFuaW1hdGlvbi5cclxuICpcclxuICogVGhpcyBlbmdpbmUgbWFrZXMgdGhlIGNhbnZhcycgY29udGV4dCAoY3R4KSBvYmplY3QgZ2xvYmFsbHkgYXZhaWxhYmxlIHRvIG1ha2UgXHJcbiAqIHdyaXRpbmcgYXBwLmpzIGEgbGl0dGxlIHNpbXBsZXIgdG8gd29yayB3aXRoLlxyXG4gKi9cclxuXHJcbnZhciBFbmdpbmUgPSAoZnVuY3Rpb24oZ2xvYmFsKSB7XHJcblx0LyogUHJlZGVmaW5lIHRoZSB2YXJpYWJsZXMgd2UnbGwgYmUgdXNpbmcgd2l0aGluIHRoaXMgc2NvcGUsXHJcblx0ICogY3JlYXRlIHRoZSBjYW52YXMgZWxlbWVudCwgZ3JhYiB0aGUgMkQgY29udGV4dCBmb3IgdGhhdCBjYW52YXNcclxuXHQgKiBzZXQgdGhlIGNhbnZhcyBlbGVtZW50cyBoZWlnaHQvd2lkdGggYW5kIGFkZCBpdCB0byB0aGUgRE9NLlxyXG5cdCAqL1xyXG5cdHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQsXHJcblx0XHR3aW4gPSBnbG9iYWwud2luZG93LFxyXG5cdFx0Y2FudmFzID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLFxyXG5cdFx0Y3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyksXHJcblx0XHRsYXN0VGltZSxcclxuXHRcdGlkO1xyXG5cclxuXHRjYW52YXMud2lkdGggPSA1MDU7XHJcblx0Y2FudmFzLmhlaWdodCA9IDYwMDtcclxuXHRkb2MuYm9keS5hcHBlbmRDaGlsZChjYW52YXMpO1xyXG5cclxuXHQvKiBUaGlzIGZ1bmN0aW9uIHNlcnZlcyBhcyB0aGUga2lja29mZiBwb2ludCBmb3IgdGhlIGdhbWUgbG9vcCBpdHNlbGZcclxuXHQgKiBhbmQgaGFuZGxlcyBwcm9wZXJseSBjYWxsaW5nIHRoZSB1cGRhdGUgYW5kIHJlbmRlciBtZXRob2RzLlxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIG1haW4oKSB7XHJcblx0XHQvKiBHZXQgb3VyIHRpbWUgZGVsdGEgaW5mb3JtYXRpb24gd2hpY2ggaXMgcmVxdWlyZWQgaWYgeW91ciBnYW1lXHJcblx0XHQgKiByZXF1aXJlcyBzbW9vdGggYW5pbWF0aW9uLiBCZWNhdXNlIGV2ZXJ5b25lJ3MgY29tcHV0ZXIgcHJvY2Vzc2VzXHJcblx0XHQgKiBpbnN0cnVjdGlvbnMgYXQgZGlmZmVyZW50IHNwZWVkcyB3ZSBuZWVkIGEgY29uc3RhbnQgdmFsdWUgdGhhdFxyXG5cdFx0ICogd291bGQgYmUgdGhlIHNhbWUgZm9yIGV2ZXJ5b25lIChyZWdhcmRsZXNzIG9mIGhvdyBmYXN0IHRoZWlyXHJcblx0XHQgKiBjb21wdXRlciBpcykgLSBodXJyYXkgdGltZSFcclxuXHRcdCAqL1xyXG5cdFx0dmFyIG5vdyA9IERhdGUubm93KCksXHJcblx0XHRcdGR0ID0gKG5vdyAtIGxhc3RUaW1lKSAvIDEwMDAuMDtcclxuXHJcblx0XHQvKiBDYWxsIG91ciB1cGRhdGUvcmVuZGVyIGZ1bmN0aW9ucywgcGFzcyBhbG9uZyB0aGUgdGltZSBkZWx0YSB0b1xyXG5cdFx0ICogb3VyIHVwZGF0ZSBmdW5jdGlvbiBzaW5jZSBpdCBtYXkgYmUgdXNlZCBmb3Igc21vb3RoIGFuaW1hdGlvbi5cclxuXHRcdCAqL1xyXG5cdFx0dXBkYXRlKGR0KTtcclxuXHRcdHJlbmRlcigpO1xyXG5cclxuXHRcdC8qIFNldCBvdXIgbGFzdFRpbWUgdmFyaWFibGUgd2hpY2ggaXMgdXNlZCB0byBkZXRlcm1pbmUgdGhlIHRpbWUgZGVsdGFcclxuXHRcdCAqIGZvciB0aGUgbmV4dCB0aW1lIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkLlxyXG5cdFx0ICovXHJcblx0XHRsYXN0VGltZSA9IG5vdztcclxuXHJcblx0XHQvKiBVc2UgdGhlIGJyb3dzZXIncyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgZnVuY3Rpb24gdG8gY2FsbCB0aGlzXHJcblx0XHQgKiBmdW5jdGlvbiBhZ2FpbiBhcyBzb29uIGFzIHRoZSBicm93c2VyIGlzIGFibGUgdG8gZHJhdyBhbm90aGVyIGZyYW1lXHJcblx0XHQgKiBvbmx5IHVudGlsbCBwbGF5ZXIgd2lucy5cclxuXHRcdCAqL1xyXG5cdFx0aWYgKHBsYXllci53aW4gfHwgcGxheWVyLmxvc2UpIHtcclxuXHRcdFx0d2luLmNhbmNlbEFuaW1hdGlvbkZyYW1lKGlkKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRpZCA9IHdpbi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobWFpbik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKiBUaGlzIGZ1bmN0aW9uIGRvZXMgc29tZSBpbml0aWFsIHNldHVwIHRoYXQgc2hvdWxkIG9ubHkgb2NjdXIgb25jZSxcclxuXHQgKiBwYXJ0aWN1bGFybHkgc2V0dGluZyB0aGUgbGFzdFRpbWUgdmFyaWFibGUgdGhhdCBpcyByZXF1aXJlZCBmb3IgdGhlXHJcblx0ICogZ2FtZSBsb29wLlxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIGluaXQoKSB7XHJcblx0XHRyZXNldCgpO1xyXG5cdFx0bGFzdFRpbWUgPSBEYXRlLm5vdygpO1xyXG5cdFx0bWFpbigpO1xyXG5cdH1cclxuXHJcblx0LyogVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgYnkgbWFpbiAob3VyIGdhbWUgbG9vcCkgYW5kIGl0c2VsZiBjYWxscyBhbGxcclxuXHQgKiBvZiB0aGUgZnVuY3Rpb25zIHdoaWNoIG1heSBuZWVkIHRvIHVwZGF0ZSBlbnRpdHkncyBkYXRhLiBCYXNlZCBvbiBob3dcclxuXHQgKiB5b3UgaW1wbGVtZW50IHlvdXIgY29sbGlzaW9uIGRldGVjdGlvbiAod2hlbiB0d28gZW50aXRpZXMgb2NjdXB5IHRoZVxyXG5cdCAqIHNhbWUgc3BhY2UsIGZvciBpbnN0YW5jZSB3aGVuIHlvdXIgY2hhcmFjdGVyIHNob3VsZCBkaWUpLCB5b3UgbWF5IGZpbmRcclxuXHQgKiB0aGUgbmVlZCB0byBhZGQgYW4gYWRkaXRpb25hbCBmdW5jdGlvbiBjYWxsIGhlcmUuIEZvciBub3csIHdlJ3ZlIGxlZnRcclxuXHQgKiBpdCBjb21tZW50ZWQgb3V0IC0geW91IG1heSBvciBtYXkgbm90IHdhbnQgdG8gaW1wbGVtZW50IHRoaXNcclxuXHQgKiBmdW5jdGlvbmFsaXR5IHRoaXMgd2F5ICh5b3UgY291bGQganVzdCBpbXBsZW1lbnQgY29sbGlzaW9uIGRldGVjdGlvblxyXG5cdCAqIG9uIHRoZSBlbnRpdGllcyB0aGVtc2VsdmVzIHdpdGhpbiB5b3VyIGFwcC5qcyBmaWxlKS5cclxuXHQgKi9cclxuXHRmdW5jdGlvbiB1cGRhdGUoZHQpIHtcclxuXHRcdHVwZGF0ZUVudGl0aWVzKGR0KTtcclxuXHRcdC8vIGNoZWNrQ29sbGlzaW9ucygpO1xyXG5cdH1cclxuXHJcblx0LyogVGhpcyBpcyBjYWxsZWQgYnkgdGhlIHVwZGF0ZSBmdW5jdGlvbiBhbmQgbG9vcHMgdGhyb3VnaCBhbGwgb2YgdGhlXHJcblx0ICogb2JqZWN0cyB3aXRoaW4geW91ciBhbGxFbmVtaWVzIGFycmF5IGFzIGRlZmluZWQgaW4gYXBwLmpzIGFuZCBjYWxsc1xyXG5cdCAqIHRoZWlyIHVwZGF0ZSgpIG1ldGhvZHMuIEl0IHdpbGwgdGhlbiBjYWxsIHRoZSB1cGRhdGUgZnVuY3Rpb24gZm9yIHlvdXJcclxuXHQgKiBwbGF5ZXIgb2JqZWN0LiBUaGVzZSB1cGRhdGUgbWV0aG9kcyBzaG91bGQgZm9jdXMgcHVyZWx5IG9uIHVwZGF0aW5nXHJcblx0ICogdGhlIGRhdGEvcHJvcGVydGllcyByZWxhdGVkIHRvIHRoZSBvYmplY3QuIERvIHlvdXIgZHJhd2luZyBpbiB5b3VyXHJcblx0ICogcmVuZGVyIG1ldGhvZHMuXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gdXBkYXRlRW50aXRpZXMoZHQpIHtcclxuXHRcdGFsbEVuZW1pZXMuZm9yRWFjaChmdW5jdGlvbihlbmVteSkge1xyXG5cdFx0XHRlbmVteS51cGRhdGUoZHQpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKiBUaGlzIGZ1bmN0aW9uIGluaXRpYWxseSBkcmF3cyB0aGUgXCJnYW1lIGxldmVsXCIsIGl0IHdpbGwgdGhlbiBjYWxsXHJcblx0ICogdGhlIHJlbmRlckVudGl0aWVzIGZ1bmN0aW9uLiBSZW1lbWJlciwgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZXZlcnlcclxuXHQgKiBnYW1lIHRpY2sgKG9yIGxvb3Agb2YgdGhlIGdhbWUgZW5naW5lKSBiZWNhdXNlIHRoYXQncyBob3cgZ2FtZXMgd29yayAtXHJcblx0ICogdGhleSBhcmUgZmxpcGJvb2tzIGNyZWF0aW5nIHRoZSBpbGx1c2lvbiBvZiBhbmltYXRpb24gYnV0IGluIHJlYWxpdHlcclxuXHQgKiB0aGV5IGFyZSBqdXN0IGRyYXdpbmcgdGhlIGVudGlyZSBzY3JlZW4gb3ZlciBhbmQgb3Zlci5cclxuXHQgKi9cclxuXHRmdW5jdGlvbiByZW5kZXIoKSB7XHJcblx0XHQvKiBUaGlzIGFycmF5IGhvbGRzIHRoZSByZWxhdGl2ZSBVUkwgdG8gdGhlIGltYWdlIHVzZWRcclxuXHRcdCAqIGZvciB0aGF0IHBhcnRpY3VsYXIgcm93IG9mIHRoZSBnYW1lIGxldmVsLlxyXG5cdFx0ICovXHJcblx0XHR2YXIgcm93SW1hZ2VzID0gW1xyXG5cdFx0XHRcdCdpbWcvd2F0ZXItYmxvY2sucG5nJywgICAvLyBUb3Agcm93IGlzIHdhdGVyXHJcblx0XHRcdFx0J2ltZy9zdG9uZS1ibG9jay5wbmcnLCAgIC8vIFJvdyAxIG9mIDMgb2Ygc3RvbmVcclxuXHRcdFx0XHQnaW1nL3N0b25lLWJsb2NrLnBuZycsICAgLy8gUm93IDIgb2YgMyBvZiBzdG9uZVxyXG5cdFx0XHRcdCdpbWcvc3RvbmUtYmxvY2sucG5nJywgICAvLyBSb3cgMyBvZiAzIG9mIHN0b25lXHJcblx0XHRcdFx0J2ltZy9ncmFzcy1ibG9jay5wbmcnLCAgIC8vIFJvdyAxIG9mIDIgb2YgZ3Jhc3NcclxuXHRcdFx0XHQnaW1nL2dyYXNzLWJsb2NrLnBuZycgICAgLy8gUm93IDIgb2YgMiBvZiBncmFzc1xyXG5cdFx0XHRdLFxyXG5cdFx0XHRudW1Sb3dzID0gNixcclxuXHRcdFx0bnVtQ29scyA9IDUsXHJcblx0XHRcdHJvdywgY29sO1xyXG5cclxuXHRcdC8vIEJlZm9yZSBkcmF3aW5nLCBjbGVhciBleGlzdGluZyBjYW52YXNcclxuXHRcdGN0eC5jbGVhclJlY3QoMCwwLGNhbnZhcy53aWR0aCxjYW52YXMuaGVpZ2h0KTtcclxuXHJcblx0XHQvKiBMb29wIHRocm91Z2ggdGhlIG51bWJlciBvZiByb3dzIGFuZCBjb2x1bW5zIHdlJ3ZlIGRlZmluZWQgYWJvdmVcclxuXHRcdCAqIGFuZCwgdXNpbmcgdGhlIHJvd0ltYWdlcyBhcnJheSwgZHJhdyB0aGUgY29ycmVjdCBpbWFnZSBmb3IgdGhhdFxyXG5cdFx0ICogcG9ydGlvbiBvZiB0aGUgXCJncmlkXCJcclxuXHRcdCAqL1xyXG5cdFx0Zm9yIChyb3cgPSAwOyByb3cgPCBudW1Sb3dzOyByb3crKykge1xyXG5cdFx0XHRmb3IgKGNvbCA9IDA7IGNvbCA8IG51bUNvbHM7IGNvbCsrKSB7XHJcblx0XHRcdFx0LyogVGhlIGRyYXdJbWFnZSBmdW5jdGlvbiBvZiB0aGUgY2FudmFzJyBjb250ZXh0IGVsZW1lbnRcclxuXHRcdFx0XHQgKiByZXF1aXJlcyAzIHBhcmFtZXRlcnM6IHRoZSBpbWFnZSB0byBkcmF3LCB0aGUgeCBjb29yZGluYXRlXHJcblx0XHRcdFx0ICogdG8gc3RhcnQgZHJhd2luZyBhbmQgdGhlIHkgY29vcmRpbmF0ZSB0byBzdGFydCBkcmF3aW5nLlxyXG5cdFx0XHRcdCAqIFdlJ3JlIHVzaW5nIG91ciBSZXNvdXJjZXMgaGVscGVycyB0byByZWZlciB0byBvdXIgaW1hZ2VzXHJcblx0XHRcdFx0ICogc28gdGhhdCB3ZSBnZXQgdGhlIGJlbmVmaXRzIG9mIGNhY2hpbmcgdGhlc2UgaW1hZ2VzLCBzaW5jZVxyXG5cdFx0XHRcdCAqIHdlJ3JlIHVzaW5nIHRoZW0gb3ZlciBhbmQgb3Zlci5cclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHRjdHguZHJhd0ltYWdlKFJlc291cmNlcy5nZXQocm93SW1hZ2VzW3Jvd10pLCBjb2wgKiAxMDEsIHJvdyAqIDgzKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJlbmRlckVudGl0aWVzKCk7XHJcblx0fVxyXG5cclxuXHQvKiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBieSB0aGUgcmVuZGVyIGZ1bmN0aW9uIGFuZCBpcyBjYWxsZWQgb24gZWFjaCBnYW1lXHJcblx0ICogdGljay4gSXRzIHB1cnBvc2UgaXMgdG8gdGhlbiBjYWxsIHRoZSByZW5kZXIgZnVuY3Rpb25zIHlvdSBoYXZlIGRlZmluZWRcclxuXHQgKiBvbiB5b3VyIGVuZW15IGFuZCBwbGF5ZXIgZW50aXRpZXMgd2l0aGluIGFwcC5qc1xyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIHJlbmRlckVudGl0aWVzKCkge1xyXG5cdFx0LyogTG9vcCB0aHJvdWdoIGFsbCBvZiB0aGUgb2JqZWN0cyB3aXRoaW4gdGhlIGFsbEVuZW1pZXMgYXJyYXkgYW5kIGNhbGxcclxuXHRcdCAqIHRoZSByZW5kZXIgZnVuY3Rpb24geW91IGhhdmUgZGVmaW5lZC5cclxuXHRcdCAqL1xyXG5cdFx0YWxsRW5lbWllcy5mb3JFYWNoKGZ1bmN0aW9uKGVuZW15KSB7XHJcblx0XHRcdGVuZW15LnJlbmRlcigpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cGxheWVyLnJlbmRlcigpO1xyXG5cdH1cclxuXHJcblx0LyogVGhpcyBmdW5jdGlvbiBkb2VzIG5vdGhpbmcgYnV0IGl0IGNvdWxkIGhhdmUgYmVlbiBhIGdvb2QgcGxhY2UgdG9cclxuXHQgKiBoYW5kbGUgZ2FtZSByZXNldCBzdGF0ZXMgLSBtYXliZSBhIG5ldyBnYW1lIG1lbnUgb3IgYSBnYW1lIG92ZXIgc2NyZWVuXHJcblx0ICogdGhvc2Ugc29ydHMgb2YgdGhpbmdzLiBJdCdzIG9ubHkgY2FsbGVkIG9uY2UgYnkgdGhlIGluaXQoKSBtZXRob2QuXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gcmVzZXQoKSB7XHJcblx0XHQvLyBub29wXHJcblx0fVxyXG5cclxuXHQvKiBHbyBhaGVhZCBhbmQgbG9hZCBhbGwgb2YgdGhlIGltYWdlcyB3ZSBrbm93IHdlJ3JlIGdvaW5nIHRvIG5lZWQgdG9cclxuXHQgKiBkcmF3IG91ciBnYW1lIGxldmVsLiBUaGVuIHNldCBpbml0IGFzIHRoZSBjYWxsYmFjayBtZXRob2QsIHNvIHRoYXQgd2hlblxyXG5cdCAqIGFsbCBvZiB0aGVzZSBpbWFnZXMgYXJlIHByb3Blcmx5IGxvYWRlZCBvdXIgZ2FtZSB3aWxsIHN0YXJ0LlxyXG5cdCAqL1xyXG5cdFJlc291cmNlcy5sb2FkKFtcclxuXHRcdCdpbWcvc3RvbmUtYmxvY2sucG5nJyxcclxuXHRcdCdpbWcvd2F0ZXItYmxvY2sucG5nJyxcclxuXHRcdCdpbWcvZ3Jhc3MtYmxvY2sucG5nJyxcclxuXHRcdCdpbWcvZW5lbXktYnVnLnBuZycsXHJcblx0XHQnaW1nL2NoYXItYm95LnBuZydcclxuXHRdKTtcclxuXHRSZXNvdXJjZXMub25SZWFkeShpbml0KTtcclxuXHJcblx0LyogQXNzaWduIHRoZSBjYW52YXMnIGNvbnRleHQgb2JqZWN0IHRvIHRoZSBnbG9iYWwgdmFyaWFibGUgKHRoZSB3aW5kb3dcclxuXHQgKiBvYmplY3Qgd2hlbiBydW4gaW4gYSBicm93c2VyKSBzbyB0aGF0IGRldmVsb3BlcnMgY2FuIHVzZSBpdCBtb3JlIGVhc2lseVxyXG5cdCAqIGZyb20gd2l0aGluIHRoZWlyIGFwcC5qcyBmaWxlcy5cclxuXHQgKi9cclxuXHRnbG9iYWwuY3R4ID0gY3R4O1xyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0c3RhcnQ6bWFpblxyXG5cdH07XHJcbn0pKHdpbmRvdyk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuLy8gRW5lbWllcyBvdXIgcGxheWVyIG11c3QgYXZvaWRcclxuY2xhc3MgRW5lbXkge1xyXG5cdGNvbnN0cnVjdG9yKHNwZWVkLCB5LCB4ID0gLTEyMCkge1xyXG5cdFx0dGhpcy5zcHJpdGUgPSAnaW1nL2VuZW15LWJ1Zy5wbmcnO1xyXG5cdFx0dGhpcy5zdGFydFggPSB4O1xyXG5cdFx0dGhpcy54ID0gdGhpcy5zdGFydFg7XHJcblx0XHR0aGlzLnkgPSB5O1xyXG5cclxuXHRcdHRoaXMuc3AgPSBzcGVlZDtcclxuXHRcdHRoaXMucmFuZG9tID0gMTAwO1xyXG5cdH1cclxuXHJcblx0Ly8gVXNlZCB0byBjaGVjayBjb2xsaXNpb25cclxuXHRnZXQgZW5kWCgpIHtcclxuXHRcdHJldHVybiB0aGlzLnggKyB0aWxlV2lkdGg7XHJcblx0fVxyXG5cclxuXHRnZXQgZW5kWSgpIHtcclxuXHRcdHJldHVybiB0aGlzLnkgKyB0aWxlSGVpZ2h0O1xyXG5cdH1cclxuXHJcblx0Ly8gVG8gbW92ZSB0aGUgZW5lbXlcclxuXHR1cGRhdGUoZHQpIHtcclxuXHRcdC8vIEluY3JlbWVudCBpbiBwb3NpdGlvbiBieSBzcGVjaWZpYyBzcGVlZFxyXG5cdFx0dGhpcy54ICs9IHRoaXMuc3AgKiB0aGlzLnJhbmRvbSAqIGR0O1xyXG5cclxuXHRcdC8vIEZvciByZXN0aW5nIHBvc2l0aW9uICYgcmFuZG9taXppbmcgc3BlZWQgZXZlcnkgdGltZSBlbmVteSBjcm9zc2VzIHRoZSByb2FkXHJcblx0XHRpZih0aGlzLnggPj0gNTIwKSB7XHJcblx0XHRcdHRoaXMueCA9IHRoaXMuc3RhcnRYOyAvLyByZXNldCBlbmVteSBwb3NpdGlvblxyXG5cdFx0XHQvL2dldHRpbmcgYSByYW5kb20gbnVtYmVyIGIvdyAxMDAtMjAwXHJcblx0XHRcdHRoaXMucmFuZG9tID0gTWF0aC5yYW5kb20oKSAqICgyMDAtMTAwKSArIDEwMDtcclxuXHRcdH1cclxuXHJcblx0XHRjaGVja0NvbGxpc2lvbih0aGlzKTtcclxuXHRcdGNoZWNrV2luKCk7XHJcblx0fVxyXG5cclxuXHQvLyBEcmF3cyB0aGUgZW5lbXkgb24gdGhlIHNjcmVlblxyXG5cdHJlbmRlcigpIHtcclxuXHRcdGN0eC5kcmF3SW1hZ2UoUmVzb3VyY2VzLmdldCh0aGlzLnNwcml0ZSksIHRoaXMueCwgdGhpcy55KTtcclxuXHR9XHJcbn1cclxuXHJcbi8vIE91ciBQbGF5ZXJcclxuY2xhc3MgUGxheWVyIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuc3ByaXRlID0gJ2ltZy9jaGFyLWJveS5wbmcnO1xyXG5cclxuXHRcdC8vIFBsYWNlZCB0aGUgcGxheWVyJ3MgZmVldCBpbiBjZW50ZXIgb2YgdGhlIGJsb2NrXHJcblx0XHR0aGlzLnN0YXJ0WCA9IDIwMDtcclxuXHRcdHRoaXMuc3RhcnRZID0gMzc1O1xyXG5cdFx0dGhpcy54ID0gdGhpcy5zdGFydFg7XHJcblx0XHR0aGlzLnkgPSB0aGlzLnN0YXJ0WTtcclxuXHJcblx0XHR0aGlzLndpbiA9IGZhbHNlO1xyXG5cdFx0dGhpcy5sb3NlID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvLyBBcHByb3hpbWF0ZSBsb2NhdGlvbiBvZiBwbGF5ZXIncyBmZWV0IHVzaW5nIGJsb2NrJ3MgZGltZW5zaW9uc1xyXG5cdGdldCBmZWV0WSgpIHtcclxuXHRcdHJldHVybiB0aGlzLnkgKyB0aWxlSGVpZ2h0O1xyXG5cdH1cclxuXHJcblx0Z2V0IGZlZXRYKCkge1xyXG5cdFx0Ly8gSGFsZiBvZiBibG9jaydzIGhvcml6b250YWwgZGltZW5zaW9uIHVzZWRcclxuXHRcdHJldHVybiB0aGlzLnggKyAodGlsZVdpZHRoLzIpO1xyXG5cdH1cclxuXHJcblx0Ly8gRHJhd3MgdGhlIHBsYXllciBvbiB0aGUgc2NyZWVuXHJcblx0cmVuZGVyKCkge1xyXG5cdFx0Y3R4LmRyYXdJbWFnZShSZXNvdXJjZXMuZ2V0KHRoaXMuc3ByaXRlKSwgdGhpcy54LCB0aGlzLnkpO1xyXG5cdH1cclxuXHJcblx0Ly8gVG8gbW92ZSB0aGUgcGxheWVyXHJcblx0aGFuZGxlSW5wdXQoa2V5KSB7XHJcblx0XHQvLyBFYWNoIGJsb2NrIG9uIHRoZSBjYW52YXMgaXMgbGF5ZWQgYXMgMTAxcHgqODNweFxyXG5cdFx0Ly8gc28gY2hhcmFjdGVyIG11c3QgbW92ZSB0aGUgc2FtZSBwaXhlbHNcclxuXHRcdC8vIHRvIGtlZXAgaGltL2hlciBjZW50ZXJlZCBvbiB0aGUgYmxvY2tcclxuXHRcdHN3aXRjaCAoa2V5KSB7XHJcblx0XHRjYXNlICdsZWZ0JzpcclxuXHRcdFx0KHRoaXMueCAhPT0gLTIpID8gdGhpcy54IC09IHRpbGVXaWR0aCA6IDE7XHJcblx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdGNhc2UgJ3VwJzpcclxuXHRcdFx0KHRoaXMueSAhPT0gLTQwKSA/IHRoaXMueSAtPSB0aWxlSGVpZ2h0IDogMTtcclxuXHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0Y2FzZSAnZG93bic6XHJcblx0XHRcdCh0aGlzLnkgIT09IDM3NSkgPyB0aGlzLnkgKz0gdGlsZUhlaWdodCA6IDE7XHJcblx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdGNhc2UgJ3JpZ2h0JzpcclxuXHRcdFx0KHRoaXMueCAhPT0gNDAyKSA/IHRoaXMueCArPSB0aWxlV2lkdGggOiAxO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcblxyXG4vLyBFbmVteSBhbmQgUExheWVyIGluc3RhbmNlc1xyXG5sZXQgYWxsRW5lbWllcyA9IFtuZXcgRW5lbXkoMS41LCA2NCksIG5ldyBFbmVteSgzLCA2NCwgLTU1MCksIG5ldyBFbmVteSg2LCA2NCwgLTEwMDApLFxyXG5cdG5ldyBFbmVteSgyLCAxNDcpLCBuZXcgRW5lbXkoMS4yLCAxNDcsIC0yMDApLCBuZXcgRW5lbXkoMywgMTQ3LCAtODAwKSxcclxuXHRuZXcgRW5lbXkoMSwgMjMwKSwgbmV3IEVuZW15KDIuMiwgMjMwLCAtNDUwKV07XHJcbmxldCBwbGF5ZXIgPSBuZXcgUGxheWVyKCk7XHJcblxyXG4vLyBEaW1lbnNpb25zIGZvciBldmVyeSBibG9jayBvbiB0aGUgY2FudmFzXHJcbmNvbnN0IHRpbGVXaWR0aCA9IDEwMSxcclxuXHR0aWxlSGVpZ2h0ID0gODM7XHJcblxyXG4vLyBLZXlwcmVzcyBIYW5kbGVyXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24oZSkge1xyXG5cdHZhciBhbGxvd2VkS2V5cyA9IHtcclxuXHRcdDM3OiAnbGVmdCcsXHJcblx0XHQzODogJ3VwJyxcclxuXHRcdDM5OiAncmlnaHQnLFxyXG5cdFx0NDA6ICdkb3duJ1xyXG5cdH07XHJcblxyXG5cdHBsYXllci5oYW5kbGVJbnB1dChhbGxvd2VkS2V5c1tlLmtleUNvZGVdKTtcclxufSk7XHJcblxyXG5cclxuLy8gRnVuY3Rpb25zXHJcblxyXG5mdW5jdGlvbiBjaGVja0NvbGxpc2lvbihlbmVteSl7XHJcblx0Ly8gQnkgbWFwcGluZyBhIHJlY3RhbmdsZSBmb3IgdGhlIGVuZW15IGZyb20gW3ggdG8gZW5kWF0gYW5kIFt5IHRvIGVuZFldXHJcblx0Ly8gRm9yIHBsYXllciwgdGhlIGZlZXQncyBwb3NpdGlvbiBpcyB0YWtlbiBpbnRvIGNvbnNpZGVyYXRpb25cclxuXHRpZihwbGF5ZXIuZmVldFggPD0gZW5lbXkuZW5kWCAmJiBwbGF5ZXIuZmVldFggPj0gZW5lbXkueCkge1xyXG5cdFx0aWYocGxheWVyLmZlZXRZIDw9IGVuZW15LmVuZFkgJiYgcGxheWVyLmZlZXRZID49IGVuZW15LnkpIHtcclxuXHRcdFx0cmVzZXRQbGF5ZXIoKTtcclxuXHRcdFx0cmVkdWNlTGl2ZXMoKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2V0UGxheWVyKCkge1xyXG5cdHBsYXllci54ID0gcGxheWVyLnN0YXJ0WDtcclxuXHRwbGF5ZXIueSA9IHBsYXllci5zdGFydFk7XHJcbn1cclxuXHJcbmxldCBsaXZlcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZhLWhlYXJ0JykpO1xyXG5sZXQgaSA9IGxpdmVzLmxlbmd0aDtcclxuZnVuY3Rpb24gcmVkdWNlTGl2ZXMoKSB7XHJcblx0aS0tO1xyXG5cdGxpdmVzW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2ZhcycpO1xyXG5cdGxpdmVzW2ldLmNsYXNzTGlzdC5hZGQoJ2ZhcicpO1xyXG5cdGNoZWNrTG9zZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1dpbigpIHtcclxuXHRpZihwbGF5ZXIueSA9PSAtNDApIHtcclxuXHRcdGdhbWVXaW4oKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdhbWVXaW4oKSB7XHJcblx0cGxheWVyLndpbiA9IHRydWU7XHJcblx0bnVtID0gMDsgLy8gdG8gYWN0IG9uIGZpcnN0IG1vZGFsIGZyb20gYXJyYXlcclxuXHRzaG93TW9kYWwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tMb3NlKCkge1xyXG5cdGlmKGkgPT0gMCkge1xyXG5cdFx0Z2FtZUxvc2UoKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdhbWVMb3NlKCkge1xyXG5cdHBsYXllci5sb3NlID0gdHJ1ZTtcclxuXHRudW0gPSAxOyAvLyB0byBhY3Qgb24gc2Vjb25kIG1vZGFsIGZyb20gYXJyYXlcclxuXHRzaG93TW9kYWwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVzZXRMaXZlcygpIHtcclxuXHRmb3IoaSA9IDA7IGkgPCBsaXZlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0bGl2ZXNbaV0uY2xhc3NMaXN0LmFkZCgnZmFzJyk7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldEdhbWUoKSB7XHJcblx0cGxheWVyLndpbiA9IGZhbHNlO1xyXG5cdHBsYXllci5sb3NlID0gZmFsc2U7XHJcblx0cmVzZXRQbGF5ZXIoKTtcclxuXHRyZXNldExpdmVzKCk7XHJcblx0aGlkZU1vZGFsKCk7XHJcblx0RW5naW5lLnN0YXJ0KCk7XHJcbn1cclxuXHJcbmNvbnN0IG1vZGFsQmFjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1iYWNrJyksXHJcblx0bW9kYWxCb2R5ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtYm9keScpKSwgLy8gYm90aCBtb2RhbHMgYWRkZWQgdG8gYXJyYXlcclxuXHRjbG9zZUJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbG9zZScpKSxcclxuXHRyZXNldEJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZXNldCcpKTtcclxubGV0IG51bTtcclxuLy8gJ251bScgd2lsbCBzdGF0ZSB3aGljaCBtb2RhbCBpcyBpbiBwZXJzcGVjdGl2ZSBmb3IgYW5pbWF0aW5nLCBzaG93TW9kYWwsIGhpZGVNb2RhbCwgYW5kIHRvZ2dsZUxpc3RlbmVyc1xyXG4vLyBpdCB3aWxsIGNvbnRyaWJ1dGUgdG8gZ29vZCBwZXJmb3JtYW5jZSBiZWNhdXNlIG9ubHkgdGhlIG1vZGFsIHdlIHdhbnQgd2lsbCBoYXZlIGNsYXNzZXMgYW5kIGxpc3RlbmVycyBhZGRlZC5cclxuXHJcbmZ1bmN0aW9uIHNob3dNb2RhbCgpIHtcclxuXHRtb2RhbEJhY2suY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xyXG5cclxuXHQvLyBkaXNwbGF5IHdpbiBtb2RhbCBvciBsb3NlIG1vZGFsXHJcblx0bW9kYWxCb2R5W251bV0uY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xyXG5cclxuXHQvLyBlbnRyeSBhbmltYXRpb24gZm9yIG1vZGFsIGluIHBlcnNwZWN0aXZlXHJcblx0KG51bSA9PSAwKSA/IG1vZGFsQm9keVtudW1dLmNsYXNzTGlzdC5hZGQoJ3RhZGEnKSA6IG1vZGFsQm9keVtudW1dLmNsYXNzTGlzdC5hZGQoJ3dvYmJsZScpO1xyXG5cclxuXHQvLyB0byBkaXNwbGF5IGxpdmVzIGRpcmVjdGx5IGZldGNoIGZyb20gc2NvcmUtcGFuZWxcclxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpLmlubmVySFRNTCA9XHJcblx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjb3JlLXBhbmVsJykuaW5uZXJIVE1MO1xyXG5cclxuXHQvLyBhZGQgZXZlbnQgbGlzdGVuZXJzXHJcblx0dG9nZ2xlTGlzdGVuZXJzKCdvbicpO1xyXG5cclxuXHQvLyBmb2N1cyBvbiByZXNldCBidXR0b24gaW4gcmVzcGVjdGl2ZSBtb2RhbFxyXG5cdHJlc2V0QnV0dG9uc1tudW1dLmZvY3VzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVNb2RhbCgpIHtcclxuXHRtb2RhbEJvZHlbbnVtXS5jbGFzc0xpc3QuYWRkKCdib3VuY2VPdXQnKTsgLy8gZXhpdCBhbmltYXRpb25cclxuXHJcblx0Ly8gdG8gYWxsb3cgdGltZSBmb3IgYW5pbWF0aW9uXHJcblx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRtb2RhbEJvZHlbbnVtXS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JywgJ3RhZGEnLCAnd29iYmxlJywgJ2JvdW5jZU91dCcpO1xyXG5cdFx0bW9kYWxCYWNrLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcclxuXHR9LDc4MCk7XHJcblxyXG5cdC8vIHJlbW92ZSBldmVudCBsaXN0ZW5lcnNcclxuXHR0b2dnbGVMaXN0ZW5lcnMoJ29mZicpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVMaXN0ZW5lcnMoc3cpIHtcclxuXHRzd2l0Y2ggKHN3KSB7XHJcblx0Y2FzZSAnb24nOlxyXG5cdFx0Y2xvc2VCdXR0b25zW251bV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoaWRlTW9kYWwpO1xyXG5cdFx0cmVzZXRCdXR0b25zW251bV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXNldEdhbWUpO1xyXG5cdFx0YnJlYWs7XHJcblxyXG5cdGNhc2UgJ29mZic6XHJcblx0XHRjbG9zZUJ1dHRvbnNbbnVtXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVNb2RhbCk7XHJcblx0XHRyZXNldEJ1dHRvbnNbbnVtXS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHJlc2V0R2FtZSk7XHJcblx0fVxyXG59Il19
