"use strict";!function(){var n={},i=[];function t(e){if(n[e])return n[e];var t=new Image;t.onload=function(){n[e]=t,s()&&i.forEach(function(e){e()})},n[e]=!1,t.src=e}function s(){var e=!0;for(var t in n)n.hasOwnProperty(t)&&!n[t]&&(e=!1);return e}window.Resources={load:function(e){e instanceof Array?e.forEach(function(e){t(e)}):t(e)},get:function(e){return n[e]},onReady:function(e){i.push(e)},isReady:s}}();var Engine=function(e){var n,i,t=e.document,s=e.window,r=t.createElement("canvas"),o=r.getContext("2d");function a(){var t,e=Date.now();t=(e-n)/1e3,allEnemies.forEach(function(e){e.update(t)}),player.update(),function(){var e,t,n=["img/water-block.png","img/stone-block.png","img/stone-block.png","img/stone-block.png","img/grass-block.png","img/grass-block.png"];for(o.clearRect(0,0,r.width,r.height),e=0;e<6;e++)for(t=0;t<5;t++)o.drawImage(Resources.get(n[e]),101*t,83*e);allEnemies.forEach(function(e){e.render()}),player.render()}(),n=e,player.win||player.lose?s.cancelAnimationFrame(i):i=s.requestAnimationFrame(a)}return r.width=505,r.height=600,t.body.appendChild(r),Resources.load(["img/stone-block.png","img/water-block.png","img/grass-block.png","img/enemy-bug.png","img/char-boy.png"]),Resources.onReady(function(){n=Date.now(),a()}),e.ctx=o,{start:a}}(window);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Enemy=function(){function i(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-120;_classCallCheck(this,i),this.sprite="img/enemy-bug.png",this.startX=n,this.x=this.startX,this.y=t,this.sp=e,this.random=100}return _createClass(i,[{key:"update",value:function(e){this.x+=this.sp*this.random*e,520<=this.x&&(this.x=this.startX,this.random=100*Math.random()+100),checkCollision(this),checkWin()}},{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}},{key:"endX",get:function(){return this.x+tileWidth}},{key:"endY",get:function(){return this.y+tileHeight}}]),i}(),Player=function(){function e(){_classCallCheck(this,e),this.sprite="img/char-boy.png",this.startX=200,this.startY=375,this.x=this.startX,this.y=this.startY,this.win=!1,this.lose=!1}return _createClass(e,[{key:"update",value:function(e){}},{key:"render",value:function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)}},{key:"handleInput",value:function(e){switch(e){case"left":-2===this.x||(this.x-=tileWidth);break;case"up":-40===this.y||(this.y-=tileHeight);break;case"down":375===this.y||(this.y+=tileHeight);break;case"right":402===this.x||(this.x+=tileWidth)}}},{key:"feetY",get:function(){return this.y+tileHeight}},{key:"feetX",get:function(){return this.x+tileWidth/2}}]),e}(),allEnemies=[new Enemy(1.5,64),new Enemy(3,64,-550),new Enemy(6,64,-1e3),new Enemy(2,147),new Enemy(1.2,147,-200),new Enemy(3,147,-800),new Enemy(1,230),new Enemy(2.2,230,-450)],player=new Player,tileWidth=101,tileHeight=83;function checkCollision(e){player.feetX<=e.endX&&player.feetX>=e.x&&player.feetY<=e.endY&&player.feetY>=e.y&&(resetPlayer(),reduceLives())}function resetPlayer(){player.x=player.startX,player.y=player.startY}document.addEventListener("keyup",function(e){player.handleInput({37:"left",38:"up",39:"right",40:"down"}[e.keyCode])});var lives=Array.from(document.querySelectorAll(".fa-heart")),i=lives.length;function reduceLives(){lives[--i].classList.remove("fas"),lives[i].classList.add("far"),checkLose()}function checkWin(){-40==player.y&&gameWin()}function gameWin(){player.win=!0,num=0,showModal()}function checkLose(){0==i&&gameLose()}function gameLose(){player.lose=!0,num=1,showModal()}function resetLives(){for(i=0;i<lives.length;i++)lives[i].classList.add("fas")}function resetGame(){player.win=!1,player.lose=!1,resetPlayer(),resetLives(),hideModal(),Engine.start()}var num,modalBack=document.querySelector(".modal-back"),modalBody=Array.from(document.querySelectorAll(".modal-body")),closeButtons=Array.from(document.querySelectorAll(".close")),resetButtons=Array.from(document.querySelectorAll(".reset"));function showModal(){modalBack.classList.add("show"),modalBody[num].classList.add("show"),0==num?modalBody[num].classList.add("tada"):modalBody[num].classList.add("wobble"),document.querySelector(".content").innerHTML=document.querySelector(".score-panel").innerHTML,toggleListeners("on"),resetButtons[num].focus()}function hideModal(){modalBody[num].classList.add("bounceOut"),setTimeout(function(){modalBody[num].classList.remove("show","tada","wobble","bounceOut"),modalBack.classList.remove("show")},780),toggleListeners("off")}function toggleListeners(e){switch(e){case"on":closeButtons[num].addEventListener("click",hideModal),resetButtons[num].addEventListener("click",resetGame);break;case"off":closeButtons[num].removeEventListener("click",hideModal),resetButtons[num].removeEventListener("click",resetGame)}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc291cmNlcy5qcyIsImVuZ2luZS5qcyIsImFwcC5qcyJdLCJuYW1lcyI6WyJyZXNvdXJjZUNhY2hlIiwicmVhZHlDYWxsYmFja3MiLCJfbG9hZCIsInVybCIsImltZyIsIkltYWdlIiwib25sb2FkIiwiaXNSZWFkeSIsImZvckVhY2giLCJmdW5jIiwic3JjIiwicmVhZHkiLCJrIiwiaGFzT3duUHJvcGVydHkiLCJ3aW5kb3ciLCJSZXNvdXJjZXMiLCJsb2FkIiwidXJsT3JBcnIiLCJBcnJheSIsImdldCIsIm9uUmVhZHkiLCJwdXNoIiwiRW5naW5lIiwiZ2xvYmFsIiwibGFzdFRpbWUiLCJpZCIsImRvYyIsImRvY3VtZW50Iiwid2luIiwiY2FudmFzIiwiY3JlYXRlRWxlbWVudCIsImN0eCIsImdldENvbnRleHQiLCJtYWluIiwiZHQiLCJub3ciLCJEYXRlIiwiYWxsRW5lbWllcyIsImVuZW15IiwidXBkYXRlIiwicGxheWVyIiwicm93IiwiY29sIiwicm93SW1hZ2VzIiwiY2xlYXJSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJkcmF3SW1hZ2UiLCJyZW5kZXIiLCJsb3NlIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJzdGFydCIsIkVuZW15Iiwic3BlZWQiLCJ5IiwieCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJzcHJpdGUiLCJzdGFydFgiLCJzcCIsInJhbmRvbSIsIk1hdGgiLCJjaGVja0NvbGxpc2lvbiIsImNoZWNrV2luIiwidGlsZVdpZHRoIiwidGlsZUhlaWdodCIsIlBsYXllciIsInN0YXJ0WSIsImtleSIsImZlZXRYIiwiZW5kWCIsImZlZXRZIiwiZW5kWSIsInJlc2V0UGxheWVyIiwicmVkdWNlTGl2ZXMiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImhhbmRsZUlucHV0IiwiMzciLCIzOCIsIjM5IiwiNDAiLCJrZXlDb2RlIiwibGl2ZXMiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJjaGVja0xvc2UiLCJnYW1lV2luIiwibnVtIiwic2hvd01vZGFsIiwiZ2FtZUxvc2UiLCJyZXNldExpdmVzIiwicmVzZXRHYW1lIiwiaGlkZU1vZGFsIiwibW9kYWxCYWNrIiwicXVlcnlTZWxlY3RvciIsIm1vZGFsQm9keSIsImNsb3NlQnV0dG9ucyIsInJlc2V0QnV0dG9ucyIsImlubmVySFRNTCIsInRvZ2dsZUxpc3RlbmVycyIsImZvY3VzIiwic2V0VGltZW91dCIsInN3IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJtYXBwaW5ncyI6IkFBQUEsY0FPQSxXQUNDLElBQUlBLEVBQWdCLEdBQ2hCQyxFQUFpQixHQTJCckIsU0FBU0MsRUFBTUMsR0FDZCxHQUFHSCxFQUFjRyxHQUtoQixPQUFPSCxFQUFjRyxHQUtyQixJQUFJQyxFQUFNLElBQUlDLE1BQ2RELEVBQUlFLE9BQVMsV0FLWk4sRUFBY0csR0FBT0MsRUFJbEJHLEtBQ0ZOLEVBQWVPLFFBQVEsU0FBU0MsR0FBUUEsT0FRMUNULEVBQWNHLElBQU8sRUFDckJDLEVBQUlNLElBQU1QLEVBZVosU0FBU0ksSUFDUixJQUFJSSxHQUFRLEVBQ1osSUFBSSxJQUFJQyxLQUFLWixFQUNUQSxFQUFjYSxlQUFlRCxLQUM5QlosRUFBY1ksS0FDZkQsR0FBUSxHQUdWLE9BQU9BLEVBYVJHLE9BQU9DLFVBQVksQ0FDbEJDLEtBekZELFNBQWNDLEdBQ1ZBLGFBQW9CQyxNQUt0QkQsRUFBU1QsUUFBUSxTQUFTTCxHQUN6QkQsRUFBTUMsS0FPUEQsRUFBTWUsSUE0RVBFLElBOUJELFNBQWFoQixHQUNaLE9BQU9ILEVBQWNHLElBOEJyQmlCLFFBVkQsU0FBaUJYLEdBQ2hCUixFQUFlb0IsS0FBS1osSUFVcEJGLFFBQVNBLEdBcEdYLEdDU0EsSUFBSWUsT0FBVSxTQUFTQyxHQUt0QixJQUlDQyxFQUNBQyxFQUxHQyxF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WiIsImZpbGUiOiJhbGwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcbi8qIFJlc291cmNlcy5qc1xyXG4gKiBUaGlzIGlzIHNpbXBseSBhbiBpbWFnZSBsb2FkaW5nIHV0aWxpdHkuIEl0IGVhc2VzIHRoZSBwcm9jZXNzIG9mIGxvYWRpbmdcclxuICogaW1hZ2UgZmlsZXMgc28gdGhhdCB0aGV5IGNhbiBiZSB1c2VkIHdpdGhpbiB5b3VyIGdhbWUuIEl0IGFsc28gaW5jbHVkZXNcclxuICogYSBzaW1wbGUgXCJjYWNoaW5nXCIgbGF5ZXIgc28gaXQgd2lsbCByZXVzZSBjYWNoZWQgaW1hZ2VzIGlmIHlvdSBhdHRlbXB0XHJcbiAqIHRvIGxvYWQgdGhlIHNhbWUgaW1hZ2UgbXVsdGlwbGUgdGltZXMuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKSB7XHJcblx0dmFyIHJlc291cmNlQ2FjaGUgPSB7fTtcclxuXHR2YXIgcmVhZHlDYWxsYmFja3MgPSBbXTtcclxuXHJcblx0LyogVGhpcyBpcyB0aGUgcHVibGljbHkgYWNjZXNzaWJsZSBpbWFnZSBsb2FkaW5nIGZ1bmN0aW9uLiBJdCBhY2NlcHRzXHJcblx0ICogYW4gYXJyYXkgb2Ygc3RyaW5ncyBwb2ludGluZyB0byBpbWFnZSBmaWxlcyBvciBhIHN0cmluZyBmb3IgYSBzaW5nbGVcclxuXHQgKiBpbWFnZS4gSXQgd2lsbCB0aGVuIGNhbGwgb3VyIHByaXZhdGUgaW1hZ2UgbG9hZGluZyBmdW5jdGlvbiBhY2NvcmRpbmdseS5cclxuXHQgKi9cclxuXHRmdW5jdGlvbiBsb2FkKHVybE9yQXJyKSB7XHJcblx0XHRpZih1cmxPckFyciBpbnN0YW5jZW9mIEFycmF5KSB7XHJcblx0XHRcdC8qIElmIHRoZSBkZXZlbG9wZXIgcGFzc2VkIGluIGFuIGFycmF5IG9mIGltYWdlc1xyXG5cdFx0XHQgKiBsb29wIHRocm91Z2ggZWFjaCB2YWx1ZSBhbmQgY2FsbCBvdXIgaW1hZ2VcclxuXHRcdFx0ICogbG9hZGVyIG9uIHRoYXQgaW1hZ2UgZmlsZVxyXG5cdFx0XHQgKi9cclxuXHRcdFx0dXJsT3JBcnIuZm9yRWFjaChmdW5jdGlvbih1cmwpIHtcclxuXHRcdFx0XHRfbG9hZCh1cmwpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8qIFRoZSBkZXZlbG9wZXIgZGlkIG5vdCBwYXNzIGFuIGFycmF5IHRvIHRoaXMgZnVuY3Rpb24sXHJcblx0XHRcdCAqIGFzc3VtZSB0aGUgdmFsdWUgaXMgYSBzdHJpbmcgYW5kIGNhbGwgb3VyIGltYWdlIGxvYWRlclxyXG5cdFx0XHQgKiBkaXJlY3RseS5cclxuXHRcdFx0ICovXHJcblx0XHRcdF9sb2FkKHVybE9yQXJyKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qIFRoaXMgaXMgb3VyIHByaXZhdGUgaW1hZ2UgbG9hZGVyIGZ1bmN0aW9uLCBpdCBpc1xyXG5cdCAqIGNhbGxlZCBieSB0aGUgcHVibGljIGltYWdlIGxvYWRlciBmdW5jdGlvbi5cclxuXHQgKi9cclxuXHRmdW5jdGlvbiBfbG9hZCh1cmwpIHtcclxuXHRcdGlmKHJlc291cmNlQ2FjaGVbdXJsXSkge1xyXG5cdFx0XHQvKiBJZiB0aGlzIFVSTCBoYXMgYmVlbiBwcmV2aW91c2x5IGxvYWRlZCBpdCB3aWxsIGV4aXN0IHdpdGhpblxyXG5cdFx0XHQgKiBvdXIgcmVzb3VyY2VDYWNoZSBhcnJheS4gSnVzdCByZXR1cm4gdGhhdCBpbWFnZSByYXRoZXJcclxuXHRcdFx0ICogcmUtbG9hZGluZyB0aGUgaW1hZ2UuXHJcblx0XHRcdCAqL1xyXG5cdFx0XHRyZXR1cm4gcmVzb3VyY2VDYWNoZVt1cmxdO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0LyogVGhpcyBVUkwgaGFzIG5vdCBiZWVuIHByZXZpb3VzbHkgbG9hZGVkIGFuZCBpcyBub3QgcHJlc2VudFxyXG5cdFx0XHQgKiB3aXRoaW4gb3VyIGNhY2hlOyB3ZSdsbCBuZWVkIHRvIGxvYWQgdGhpcyBpbWFnZS5cclxuXHRcdFx0ICovXHJcblx0XHRcdHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcclxuXHRcdFx0aW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8qIE9uY2Ugb3VyIGltYWdlIGhhcyBwcm9wZXJseSBsb2FkZWQsIGFkZCBpdCB0byBvdXIgY2FjaGVcclxuXHRcdFx0XHQgKiBzbyB0aGF0IHdlIGNhbiBzaW1wbHkgcmV0dXJuIHRoaXMgaW1hZ2UgaWYgdGhlIGRldmVsb3BlclxyXG5cdFx0XHRcdCAqIGF0dGVtcHRzIHRvIGxvYWQgdGhpcyBmaWxlIGluIHRoZSBmdXR1cmUuXHJcblx0XHRcdFx0ICovXHJcblx0XHRcdFx0cmVzb3VyY2VDYWNoZVt1cmxdID0gaW1nO1xyXG5cdFx0XHRcdC8qIE9uY2UgdGhlIGltYWdlIGlzIGFjdHVhbGx5IGxvYWRlZCBhbmQgcHJvcGVybHkgY2FjaGVkLFxyXG5cdFx0XHRcdCAqIGNhbGwgYWxsIG9mIHRoZSBvblJlYWR5KCkgY2FsbGJhY2tzIHdlIGhhdmUgZGVmaW5lZC5cclxuXHRcdFx0XHQgKi9cclxuXHRcdFx0XHRpZihpc1JlYWR5KCkpIHtcclxuXHRcdFx0XHRcdHJlYWR5Q2FsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24oZnVuYykgeyBmdW5jKCk7IH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdC8qIFNldCB0aGUgaW5pdGlhbCBjYWNoZSB2YWx1ZSB0byBmYWxzZSwgdGhpcyB3aWxsIGNoYW5nZSB3aGVuXHJcblx0XHRcdCAqIHRoZSBpbWFnZSdzIG9ubG9hZCBldmVudCBoYW5kbGVyIGlzIGNhbGxlZC4gRmluYWxseSwgcG9pbnRcclxuXHRcdFx0ICogdGhlIGltYWdlJ3Mgc3JjIGF0dHJpYnV0ZSB0byB0aGUgcGFzc2VkIGluIFVSTC5cclxuXHRcdFx0ICovXHJcblx0XHRcdHJlc291cmNlQ2FjaGVbdXJsXSA9IGZhbHNlO1xyXG5cdFx0XHRpbWcuc3JjID0gdXJsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyogVGhpcyBpcyB1c2VkIGJ5IGRldmVsb3BlcnMgdG8gZ3JhYiByZWZlcmVuY2VzIHRvIGltYWdlcyB0aGV5IGtub3dcclxuXHQgKiBoYXZlIGJlZW4gcHJldmlvdXNseSBsb2FkZWQuIElmIGFuIGltYWdlIGlzIGNhY2hlZCwgdGhpcyBmdW5jdGlvbnNcclxuXHQgKiB0aGUgc2FtZSBhcyBjYWxsaW5nIGxvYWQoKSBvbiB0aGF0IFVSTC5cclxuXHQgKi9cclxuXHRmdW5jdGlvbiBnZXQodXJsKSB7XHJcblx0XHRyZXR1cm4gcmVzb3VyY2VDYWNoZVt1cmxdO1xyXG5cdH1cclxuXHJcblx0LyogVGhpcyBmdW5jdGlvbiBkZXRlcm1pbmVzIGlmIGFsbCBvZiB0aGUgaW1hZ2VzIHRoYXQgaGF2ZSBiZWVuIHJlcXVlc3RlZFxyXG5cdCAqIGZvciBsb2FkaW5nIGhhdmUgaW4gZmFjdCBiZWVuIHByb3Blcmx5IGxvYWRlZC5cclxuXHQgKi9cclxuXHRmdW5jdGlvbiBpc1JlYWR5KCkge1xyXG5cdFx0dmFyIHJlYWR5ID0gdHJ1ZTtcclxuXHRcdGZvcih2YXIgayBpbiByZXNvdXJjZUNhY2hlKSB7XHJcblx0XHRcdGlmKHJlc291cmNlQ2FjaGUuaGFzT3duUHJvcGVydHkoaykgJiZcclxuXHRcdFx0XHQhcmVzb3VyY2VDYWNoZVtrXSkge1xyXG5cdFx0XHRcdHJlYWR5ID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZWFkeTtcclxuXHR9XHJcblxyXG5cdC8qIFRoaXMgZnVuY3Rpb24gd2lsbCBhZGQgYSBmdW5jdGlvbiB0byB0aGUgY2FsbGJhY2sgc3RhY2sgdGhhdCBpcyBjYWxsZWRcclxuXHQgKiB3aGVuIGFsbCByZXF1ZXN0ZWQgaW1hZ2VzIGFyZSBwcm9wZXJseSBsb2FkZWQuXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gb25SZWFkeShmdW5jKSB7XHJcblx0XHRyZWFkeUNhbGxiYWNrcy5wdXNoKGZ1bmMpO1xyXG5cdH1cclxuXHJcblx0LyogVGhpcyBvYmplY3QgZGVmaW5lcyB0aGUgcHVibGljbHkgYWNjZXNzaWJsZSBmdW5jdGlvbnMgYXZhaWxhYmxlIHRvXHJcblx0ICogZGV2ZWxvcGVycyBieSBjcmVhdGluZyBhIGdsb2JhbCBSZXNvdXJjZXMgb2JqZWN0LlxyXG5cdCAqL1xyXG5cdHdpbmRvdy5SZXNvdXJjZXMgPSB7XHJcblx0XHRsb2FkOiBsb2FkLFxyXG5cdFx0Z2V0OiBnZXQsXHJcblx0XHRvblJlYWR5OiBvblJlYWR5LFxyXG5cdFx0aXNSZWFkeTogaXNSZWFkeVxyXG5cdH07XHJcbn0pKCk7XHJcbiIsIid1c2Ugc3RyaWN0JztcclxuLyogRW5naW5lLmpzXHJcbiAqIFRoaXMgZmlsZSBwcm92aWRlcyB0aGUgZ2FtZSBsb29wIGZ1bmN0aW9uYWxpdHkgKHVwZGF0ZSBlbnRpdGllcyBhbmQgcmVuZGVyKSxcclxuICogZHJhd3MgdGhlIGluaXRpYWwgZ2FtZSBib2FyZCBvbiB0aGUgc2NyZWVuLCBhbmQgdGhlbiBjYWxscyB0aGUgdXBkYXRlIGFuZFxyXG4gKiByZW5kZXIgbWV0aG9kcyBvbiB5b3VyIHBsYXllciBhbmQgZW5lbXkgb2JqZWN0cyAoZGVmaW5lZCBpbiB5b3VyIGFwcC5qcykuXHJcbiAqXHJcbiAqIEEgZ2FtZSBlbmdpbmUgd29ya3MgYnkgZHJhd2luZyB0aGUgZW50aXJlIGdhbWUgc2NyZWVuIG92ZXIgYW5kIG92ZXIsIGtpbmQgb2ZcclxuICogbGlrZSBhIGZsaXBib29rIHlvdSBtYXkgaGF2ZSBjcmVhdGVkIGFzIGEga2lkLiBXaGVuIHlvdXIgcGxheWVyIG1vdmVzIGFjcm9zc1xyXG4gKiB0aGUgc2NyZWVuLCBpdCBtYXkgbG9vayBsaWtlIGp1c3QgdGhhdCBpbWFnZS9jaGFyYWN0ZXIgaXMgbW92aW5nIG9yIGJlaW5nXHJcbiAqIGRyYXduIGJ1dCB0aGF0IGlzIG5vdCB0aGUgY2FzZS4gV2hhdCdzIHJlYWxseSBoYXBwZW5pbmcgaXMgdGhlIGVudGlyZSBcInNjZW5lXCJcclxuICogaXMgYmVpbmcgZHJhd24gb3ZlciBhbmQgb3ZlciwgcHJlc2VudGluZyB0aGUgaWxsdXNpb24gb2YgYW5pbWF0aW9uLlxyXG4gKlxyXG4gKiBUaGlzIGVuZ2luZSBtYWtlcyB0aGUgY2FudmFzJyBjb250ZXh0IChjdHgpIG9iamVjdCBnbG9iYWxseSBhdmFpbGFibGUgdG8gbWFrZSBcclxuICogd3JpdGluZyBhcHAuanMgYSBsaXR0bGUgc2ltcGxlciB0byB3b3JrIHdpdGguXHJcbiAqL1xyXG5cclxudmFyIEVuZ2luZSA9IChmdW5jdGlvbihnbG9iYWwpIHtcclxuXHQvKiBQcmVkZWZpbmUgdGhlIHZhcmlhYmxlcyB3ZSdsbCBiZSB1c2luZyB3aXRoaW4gdGhpcyBzY29wZSxcclxuXHQgKiBjcmVhdGUgdGhlIGNhbnZhcyBlbGVtZW50LCBncmFiIHRoZSAyRCBjb250ZXh0IGZvciB0aGF0IGNhbnZhc1xyXG5cdCAqIHNldCB0aGUgY2FudmFzIGVsZW1lbnRzIGhlaWdodC93aWR0aCBhbmQgYWRkIGl0IHRvIHRoZSBET00uXHJcblx0ICovXHJcblx0dmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudCxcclxuXHRcdHdpbiA9IGdsb2JhbC53aW5kb3csXHJcblx0XHRjYW52YXMgPSBkb2MuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksXHJcblx0XHRjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSxcclxuXHRcdGxhc3RUaW1lLFxyXG5cdFx0aWQ7XHJcblxyXG5cdGNhbnZhcy53aWR0aCA9IDUwNTtcclxuXHRjYW52YXMuaGVpZ2h0ID0gNjAwO1xyXG5cdGRvYy5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XHJcblxyXG5cdC8qIFRoaXMgZnVuY3Rpb24gc2VydmVzIGFzIHRoZSBraWNrb2ZmIHBvaW50IGZvciB0aGUgZ2FtZSBsb29wIGl0c2VsZlxyXG5cdCAqIGFuZCBoYW5kbGVzIHByb3Blcmx5IGNhbGxpbmcgdGhlIHVwZGF0ZSBhbmQgcmVuZGVyIG1ldGhvZHMuXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gbWFpbigpIHtcclxuXHRcdC8qIEdldCBvdXIgdGltZSBkZWx0YSBpbmZvcm1hdGlvbiB3aGljaCBpcyByZXF1aXJlZCBpZiB5b3VyIGdhbWVcclxuXHRcdCAqIHJlcXVpcmVzIHNtb290aCBhbmltYXRpb24uIEJlY2F1c2UgZXZlcnlvbmUncyBjb21wdXRlciBwcm9jZXNzZXNcclxuXHRcdCAqIGluc3RydWN0aW9ucyBhdCBkaWZmZXJlbnQgc3BlZWRzIHdlIG5lZWQgYSBjb25zdGFudCB2YWx1ZSB0aGF0XHJcblx0XHQgKiB3b3VsZCBiZSB0aGUgc2FtZSBmb3IgZXZlcnlvbmUgKHJlZ2FyZGxlc3Mgb2YgaG93IGZhc3QgdGhlaXJcclxuXHRcdCAqIGNvbXB1dGVyIGlzKSAtIGh1cnJheSB0aW1lIVxyXG5cdFx0ICovXHJcblx0XHR2YXIgbm93ID0gRGF0ZS5ub3coKSxcclxuXHRcdFx0ZHQgPSAobm93IC0gbGFzdFRpbWUpIC8gMTAwMC4wO1xyXG5cclxuXHRcdC8qIENhbGwgb3VyIHVwZGF0ZS9yZW5kZXIgZnVuY3Rpb25zLCBwYXNzIGFsb25nIHRoZSB0aW1lIGRlbHRhIHRvXHJcblx0XHQgKiBvdXIgdXBkYXRlIGZ1bmN0aW9uIHNpbmNlIGl0IG1heSBiZSB1c2VkIGZvciBzbW9vdGggYW5pbWF0aW9uLlxyXG5cdFx0ICovXHJcblx0XHR1cGRhdGUoZHQpO1xyXG5cdFx0cmVuZGVyKCk7XHJcblxyXG5cdFx0LyogU2V0IG91ciBsYXN0VGltZSB2YXJpYWJsZSB3aGljaCBpcyB1c2VkIHRvIGRldGVybWluZSB0aGUgdGltZSBkZWx0YVxyXG5cdFx0ICogZm9yIHRoZSBuZXh0IHRpbWUgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQuXHJcblx0XHQgKi9cclxuXHRcdGxhc3RUaW1lID0gbm93O1xyXG5cclxuXHRcdC8qIFVzZSB0aGUgYnJvd3NlcidzIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmdW5jdGlvbiB0byBjYWxsIHRoaXNcclxuXHRcdCAqIGZ1bmN0aW9uIGFnYWluIGFzIHNvb24gYXMgdGhlIGJyb3dzZXIgaXMgYWJsZSB0byBkcmF3IGFub3RoZXIgZnJhbWVcclxuXHRcdCAqIG9ubHkgdW50aWxsIHBsYXllciB3aW5zLlxyXG5cdFx0ICovXHJcblx0XHRpZiAocGxheWVyLndpbiB8fCBwbGF5ZXIubG9zZSkge1xyXG5cdFx0XHR3aW4uY2FuY2VsQW5pbWF0aW9uRnJhbWUoaWQpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGlkID0gd2luLnJlcXVlc3RBbmltYXRpb25GcmFtZShtYWluKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qIFRoaXMgZnVuY3Rpb24gZG9lcyBzb21lIGluaXRpYWwgc2V0dXAgdGhhdCBzaG91bGQgb25seSBvY2N1ciBvbmNlLFxyXG5cdCAqIHBhcnRpY3VsYXJseSBzZXR0aW5nIHRoZSBsYXN0VGltZSB2YXJpYWJsZSB0aGF0IGlzIHJlcXVpcmVkIGZvciB0aGVcclxuXHQgKiBnYW1lIGxvb3AuXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gaW5pdCgpIHtcclxuXHRcdHJlc2V0KCk7XHJcblx0XHRsYXN0VGltZSA9IERhdGUubm93KCk7XHJcblx0XHRtYWluKCk7XHJcblx0fVxyXG5cclxuXHQvKiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBieSBtYWluIChvdXIgZ2FtZSBsb29wKSBhbmQgaXRzZWxmIGNhbGxzIGFsbFxyXG5cdCAqIG9mIHRoZSBmdW5jdGlvbnMgd2hpY2ggbWF5IG5lZWQgdG8gdXBkYXRlIGVudGl0eSdzIGRhdGEuIEJhc2VkIG9uIGhvd1xyXG5cdCAqIHlvdSBpbXBsZW1lbnQgeW91ciBjb2xsaXNpb24gZGV0ZWN0aW9uICh3aGVuIHR3byBlbnRpdGllcyBvY2N1cHkgdGhlXHJcblx0ICogc2FtZSBzcGFjZSwgZm9yIGluc3RhbmNlIHdoZW4geW91ciBjaGFyYWN0ZXIgc2hvdWxkIGRpZSksIHlvdSBtYXkgZmluZFxyXG5cdCAqIHRoZSBuZWVkIHRvIGFkZCBhbiBhZGRpdGlvbmFsIGZ1bmN0aW9uIGNhbGwgaGVyZS4gRm9yIG5vdywgd2UndmUgbGVmdFxyXG5cdCAqIGl0IGNvbW1lbnRlZCBvdXQgLSB5b3UgbWF5IG9yIG1heSBub3Qgd2FudCB0byBpbXBsZW1lbnQgdGhpc1xyXG5cdCAqIGZ1bmN0aW9uYWxpdHkgdGhpcyB3YXkgKHlvdSBjb3VsZCBqdXN0IGltcGxlbWVudCBjb2xsaXNpb24gZGV0ZWN0aW9uXHJcblx0ICogb24gdGhlIGVudGl0aWVzIHRoZW1zZWx2ZXMgd2l0aGluIHlvdXIgYXBwLmpzIGZpbGUpLlxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIHVwZGF0ZShkdCkge1xyXG5cdFx0dXBkYXRlRW50aXRpZXMoZHQpO1xyXG5cdFx0Ly8gY2hlY2tDb2xsaXNpb25zKCk7XHJcblx0fVxyXG5cclxuXHQvKiBUaGlzIGlzIGNhbGxlZCBieSB0aGUgdXBkYXRlIGZ1bmN0aW9uIGFuZCBsb29wcyB0aHJvdWdoIGFsbCBvZiB0aGVcclxuXHQgKiBvYmplY3RzIHdpdGhpbiB5b3VyIGFsbEVuZW1pZXMgYXJyYXkgYXMgZGVmaW5lZCBpbiBhcHAuanMgYW5kIGNhbGxzXHJcblx0ICogdGhlaXIgdXBkYXRlKCkgbWV0aG9kcy4gSXQgd2lsbCB0aGVuIGNhbGwgdGhlIHVwZGF0ZSBmdW5jdGlvbiBmb3IgeW91clxyXG5cdCAqIHBsYXllciBvYmplY3QuIFRoZXNlIHVwZGF0ZSBtZXRob2RzIHNob3VsZCBmb2N1cyBwdXJlbHkgb24gdXBkYXRpbmdcclxuXHQgKiB0aGUgZGF0YS9wcm9wZXJ0aWVzIHJlbGF0ZWQgdG8gdGhlIG9iamVjdC4gRG8geW91ciBkcmF3aW5nIGluIHlvdXJcclxuXHQgKiByZW5kZXIgbWV0aG9kcy5cclxuXHQgKi9cclxuXHRmdW5jdGlvbiB1cGRhdGVFbnRpdGllcyhkdCkge1xyXG5cdFx0YWxsRW5lbWllcy5mb3JFYWNoKGZ1bmN0aW9uKGVuZW15KSB7XHJcblx0XHRcdGVuZW15LnVwZGF0ZShkdCk7XHJcblx0XHR9KTtcclxuXHRcdHBsYXllci51cGRhdGUoKTtcclxuXHR9XHJcblxyXG5cdC8qIFRoaXMgZnVuY3Rpb24gaW5pdGlhbGx5IGRyYXdzIHRoZSBcImdhbWUgbGV2ZWxcIiwgaXQgd2lsbCB0aGVuIGNhbGxcclxuXHQgKiB0aGUgcmVuZGVyRW50aXRpZXMgZnVuY3Rpb24uIFJlbWVtYmVyLCB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBldmVyeVxyXG5cdCAqIGdhbWUgdGljayAob3IgbG9vcCBvZiB0aGUgZ2FtZSBlbmdpbmUpIGJlY2F1c2UgdGhhdCdzIGhvdyBnYW1lcyB3b3JrIC1cclxuXHQgKiB0aGV5IGFyZSBmbGlwYm9va3MgY3JlYXRpbmcgdGhlIGlsbHVzaW9uIG9mIGFuaW1hdGlvbiBidXQgaW4gcmVhbGl0eVxyXG5cdCAqIHRoZXkgYXJlIGp1c3QgZHJhd2luZyB0aGUgZW50aXJlIHNjcmVlbiBvdmVyIGFuZCBvdmVyLlxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuXHRcdC8qIFRoaXMgYXJyYXkgaG9sZHMgdGhlIHJlbGF0aXZlIFVSTCB0byB0aGUgaW1hZ2UgdXNlZFxyXG5cdFx0ICogZm9yIHRoYXQgcGFydGljdWxhciByb3cgb2YgdGhlIGdhbWUgbGV2ZWwuXHJcblx0XHQgKi9cclxuXHRcdHZhciByb3dJbWFnZXMgPSBbXHJcblx0XHRcdFx0J2ltZy93YXRlci1ibG9jay5wbmcnLCAgIC8vIFRvcCByb3cgaXMgd2F0ZXJcclxuXHRcdFx0XHQnaW1nL3N0b25lLWJsb2NrLnBuZycsICAgLy8gUm93IDEgb2YgMyBvZiBzdG9uZVxyXG5cdFx0XHRcdCdpbWcvc3RvbmUtYmxvY2sucG5nJywgICAvLyBSb3cgMiBvZiAzIG9mIHN0b25lXHJcblx0XHRcdFx0J2ltZy9zdG9uZS1ibG9jay5wbmcnLCAgIC8vIFJvdyAzIG9mIDMgb2Ygc3RvbmVcclxuXHRcdFx0XHQnaW1nL2dyYXNzLWJsb2NrLnBuZycsICAgLy8gUm93IDEgb2YgMiBvZiBncmFzc1xyXG5cdFx0XHRcdCdpbWcvZ3Jhc3MtYmxvY2sucG5nJyAgICAvLyBSb3cgMiBvZiAyIG9mIGdyYXNzXHJcblx0XHRcdF0sXHJcblx0XHRcdG51bVJvd3MgPSA2LFxyXG5cdFx0XHRudW1Db2xzID0gNSxcclxuXHRcdFx0cm93LCBjb2w7XHJcblxyXG5cdFx0Ly8gQmVmb3JlIGRyYXdpbmcsIGNsZWFyIGV4aXN0aW5nIGNhbnZhc1xyXG5cdFx0Y3R4LmNsZWFyUmVjdCgwLDAsY2FudmFzLndpZHRoLGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuXHRcdC8qIExvb3AgdGhyb3VnaCB0aGUgbnVtYmVyIG9mIHJvd3MgYW5kIGNvbHVtbnMgd2UndmUgZGVmaW5lZCBhYm92ZVxyXG5cdFx0ICogYW5kLCB1c2luZyB0aGUgcm93SW1hZ2VzIGFycmF5LCBkcmF3IHRoZSBjb3JyZWN0IGltYWdlIGZvciB0aGF0XHJcblx0XHQgKiBwb3J0aW9uIG9mIHRoZSBcImdyaWRcIlxyXG5cdFx0ICovXHJcblx0XHRmb3IgKHJvdyA9IDA7IHJvdyA8IG51bVJvd3M7IHJvdysrKSB7XHJcblx0XHRcdGZvciAoY29sID0gMDsgY29sIDwgbnVtQ29sczsgY29sKyspIHtcclxuXHRcdFx0XHQvKiBUaGUgZHJhd0ltYWdlIGZ1bmN0aW9uIG9mIHRoZSBjYW52YXMnIGNvbnRleHQgZWxlbWVudFxyXG5cdFx0XHRcdCAqIHJlcXVpcmVzIDMgcGFyYW1ldGVyczogdGhlIGltYWdlIHRvIGRyYXcsIHRoZSB4IGNvb3JkaW5hdGVcclxuXHRcdFx0XHQgKiB0byBzdGFydCBkcmF3aW5nIGFuZCB0aGUgeSBjb29yZGluYXRlIHRvIHN0YXJ0IGRyYXdpbmcuXHJcblx0XHRcdFx0ICogV2UncmUgdXNpbmcgb3VyIFJlc291cmNlcyBoZWxwZXJzIHRvIHJlZmVyIHRvIG91ciBpbWFnZXNcclxuXHRcdFx0XHQgKiBzbyB0aGF0IHdlIGdldCB0aGUgYmVuZWZpdHMgb2YgY2FjaGluZyB0aGVzZSBpbWFnZXMsIHNpbmNlXHJcblx0XHRcdFx0ICogd2UncmUgdXNpbmcgdGhlbSBvdmVyIGFuZCBvdmVyLlxyXG5cdFx0XHRcdCAqL1xyXG5cdFx0XHRcdGN0eC5kcmF3SW1hZ2UoUmVzb3VyY2VzLmdldChyb3dJbWFnZXNbcm93XSksIGNvbCAqIDEwMSwgcm93ICogODMpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmVuZGVyRW50aXRpZXMoKTtcclxuXHR9XHJcblxyXG5cdC8qIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGJ5IHRoZSByZW5kZXIgZnVuY3Rpb24gYW5kIGlzIGNhbGxlZCBvbiBlYWNoIGdhbWVcclxuXHQgKiB0aWNrLiBJdHMgcHVycG9zZSBpcyB0byB0aGVuIGNhbGwgdGhlIHJlbmRlciBmdW5jdGlvbnMgeW91IGhhdmUgZGVmaW5lZFxyXG5cdCAqIG9uIHlvdXIgZW5lbXkgYW5kIHBsYXllciBlbnRpdGllcyB3aXRoaW4gYXBwLmpzXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gcmVuZGVyRW50aXRpZXMoKSB7XHJcblx0XHQvKiBMb29wIHRocm91Z2ggYWxsIG9mIHRoZSBvYmplY3RzIHdpdGhpbiB0aGUgYWxsRW5lbWllcyBhcnJheSBhbmQgY2FsbFxyXG5cdFx0ICogdGhlIHJlbmRlciBmdW5jdGlvbiB5b3UgaGF2ZSBkZWZpbmVkLlxyXG5cdFx0ICovXHJcblx0XHRhbGxFbmVtaWVzLmZvckVhY2goZnVuY3Rpb24oZW5lbXkpIHtcclxuXHRcdFx0ZW5lbXkucmVuZGVyKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRwbGF5ZXIucmVuZGVyKCk7XHJcblx0fVxyXG5cclxuXHQvKiBUaGlzIGZ1bmN0aW9uIGRvZXMgbm90aGluZyBidXQgaXQgY291bGQgaGF2ZSBiZWVuIGEgZ29vZCBwbGFjZSB0b1xyXG5cdCAqIGhhbmRsZSBnYW1lIHJlc2V0IHN0YXRlcyAtIG1heWJlIGEgbmV3IGdhbWUgbWVudSBvciBhIGdhbWUgb3ZlciBzY3JlZW5cclxuXHQgKiB0aG9zZSBzb3J0cyBvZiB0aGluZ3MuIEl0J3Mgb25seSBjYWxsZWQgb25jZSBieSB0aGUgaW5pdCgpIG1ldGhvZC5cclxuXHQgKi9cclxuXHRmdW5jdGlvbiByZXNldCgpIHtcclxuXHRcdC8vIG5vb3BcclxuXHR9XHJcblxyXG5cdC8qIEdvIGFoZWFkIGFuZCBsb2FkIGFsbCBvZiB0aGUgaW1hZ2VzIHdlIGtub3cgd2UncmUgZ29pbmcgdG8gbmVlZCB0b1xyXG5cdCAqIGRyYXcgb3VyIGdhbWUgbGV2ZWwuIFRoZW4gc2V0IGluaXQgYXMgdGhlIGNhbGxiYWNrIG1ldGhvZCwgc28gdGhhdCB3aGVuXHJcblx0ICogYWxsIG9mIHRoZXNlIGltYWdlcyBhcmUgcHJvcGVybHkgbG9hZGVkIG91ciBnYW1lIHdpbGwgc3RhcnQuXHJcblx0ICovXHJcblx0UmVzb3VyY2VzLmxvYWQoW1xyXG5cdFx0J2ltZy9zdG9uZS1ibG9jay5wbmcnLFxyXG5cdFx0J2ltZy93YXRlci1ibG9jay5wbmcnLFxyXG5cdFx0J2ltZy9ncmFzcy1ibG9jay5wbmcnLFxyXG5cdFx0J2ltZy9lbmVteS1idWcucG5nJyxcclxuXHRcdCdpbWcvY2hhci1ib3kucG5nJ1xyXG5cdF0pO1xyXG5cdFJlc291cmNlcy5vblJlYWR5KGluaXQpO1xyXG5cclxuXHQvKiBBc3NpZ24gdGhlIGNhbnZhcycgY29udGV4dCBvYmplY3QgdG8gdGhlIGdsb2JhbCB2YXJpYWJsZSAodGhlIHdpbmRvd1xyXG5cdCAqIG9iamVjdCB3aGVuIHJ1biBpbiBhIGJyb3dzZXIpIHNvIHRoYXQgZGV2ZWxvcGVycyBjYW4gdXNlIGl0IG1vcmUgZWFzaWx5XHJcblx0ICogZnJvbSB3aXRoaW4gdGhlaXIgYXBwLmpzIGZpbGVzLlxyXG5cdCAqL1xyXG5cdGdsb2JhbC5jdHggPSBjdHg7XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRzdGFydDptYWluXHJcblx0fTtcclxufSkod2luZG93KTtcclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG4vLyBFbmVtaWVzIG91ciBwbGF5ZXIgbXVzdCBhdm9pZFxyXG5jbGFzcyBFbmVteSB7XHJcblx0Y29uc3RydWN0b3Ioc3BlZWQsIHksIHggPSAtMTIwKSB7XHJcblx0XHR0aGlzLnNwcml0ZSA9ICdpbWcvZW5lbXktYnVnLnBuZyc7XHJcblx0XHR0aGlzLnN0YXJ0WCA9IHg7XHJcblx0XHR0aGlzLnggPSB0aGlzLnN0YXJ0WDtcclxuXHRcdHRoaXMueSA9IHk7XHJcblxyXG5cdFx0dGhpcy5zcCA9IHNwZWVkO1xyXG5cdFx0dGhpcy5yYW5kb20gPSAxMDA7XHJcblx0fVxyXG5cclxuXHQvLyBVc2VkIHRvIGNoZWNrIGNvbGxpc2lvblxyXG5cdGdldCBlbmRYKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMueCArIHRpbGVXaWR0aDtcclxuXHR9XHJcblxyXG5cdGdldCBlbmRZKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMueSArIHRpbGVIZWlnaHQ7XHJcblx0fVxyXG5cclxuXHQvLyBUbyBtb3ZlIHRoZSBlbmVteVxyXG5cdHVwZGF0ZShkdCkge1xyXG5cdFx0Ly8gSW5jcmVtZW50IGluIHBvc2l0aW9uIGJ5IHNwZWNpZmljIHNwZWVkXHJcblx0XHR0aGlzLnggKz0gdGhpcy5zcCAqIHRoaXMucmFuZG9tICogZHQ7XHJcblxyXG5cdFx0Ly8gRm9yIHJlc3RpbmcgcG9zaXRpb24gJiByYW5kb21pemluZyBzcGVlZCBldmVyeSB0aW1lIGVuZW15IGNyb3NzZXMgdGhlIHJvYWRcclxuXHRcdGlmKHRoaXMueCA+PSA1MjApIHtcclxuXHRcdFx0dGhpcy54ID0gdGhpcy5zdGFydFg7IC8vIHJlc2V0IGVuZW15IHBvc2l0aW9uXHJcblx0XHRcdC8vZ2V0dGluZyBhIHJhbmRvbSBudW1iZXIgYi93IDEwMC0yMDBcclxuXHRcdFx0dGhpcy5yYW5kb20gPSBNYXRoLnJhbmRvbSgpICogKDIwMC0xMDApICsgMTAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNoZWNrQ29sbGlzaW9uKHRoaXMpO1xyXG5cdFx0Y2hlY2tXaW4oKTtcclxuXHR9XHJcblxyXG5cdC8vIERyYXdzIHRoZSBlbmVteSBvbiB0aGUgc2NyZWVuXHJcblx0cmVuZGVyKCkge1xyXG5cdFx0Y3R4LmRyYXdJbWFnZShSZXNvdXJjZXMuZ2V0KHRoaXMuc3ByaXRlKSwgdGhpcy54LCB0aGlzLnkpO1xyXG5cdH1cclxufVxyXG5cclxuLy8gT3VyIFBsYXllclxyXG5jbGFzcyBQbGF5ZXIge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy5zcHJpdGUgPSAnaW1nL2NoYXItYm95LnBuZyc7XHJcblxyXG5cdFx0Ly8gUGxhY2VkIHRoZSBwbGF5ZXIncyBmZWV0IGluIGNlbnRlciBvZiB0aGUgYmxvY2tcclxuXHRcdHRoaXMuc3RhcnRYID0gMjAwO1xyXG5cdFx0dGhpcy5zdGFydFkgPSAzNzU7XHJcblx0XHR0aGlzLnggPSB0aGlzLnN0YXJ0WDtcclxuXHRcdHRoaXMueSA9IHRoaXMuc3RhcnRZO1xyXG5cclxuXHRcdHRoaXMud2luID0gZmFsc2U7XHJcblx0XHR0aGlzLmxvc2UgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8vIEFwcHJveGltYXRlIGxvY2F0aW9uIG9mIHBsYXllcidzIGZlZXQgdXNpbmcgYmxvY2sncyBkaW1lbnNpb25zXHJcblx0Z2V0IGZlZXRZKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMueSArIHRpbGVIZWlnaHQ7XHJcblx0fVxyXG5cclxuXHRnZXQgZmVldFgoKSB7XHJcblx0XHQvLyBIYWxmIG9mIGJsb2NrJ3MgaG9yaXpvbnRhbCBkaW1lbnNpb24gdXNlZFxyXG5cdFx0cmV0dXJuIHRoaXMueCArICh0aWxlV2lkdGgvMik7XHJcblx0fVxyXG5cclxuXHR1cGRhdGUoZHQpIHtcclxuXHJcblx0fVxyXG5cclxuXHQvLyBEcmF3cyB0aGUgcGxheWVyIG9uIHRoZSBzY3JlZW5cclxuXHRyZW5kZXIoKSB7XHJcblx0XHRjdHguZHJhd0ltYWdlKFJlc291cmNlcy5nZXQodGhpcy5zcHJpdGUpLCB0aGlzLngsIHRoaXMueSk7XHJcblx0fVxyXG5cclxuXHQvLyBUbyBtb3ZlIHRoZSBwbGF5ZXJcclxuXHRoYW5kbGVJbnB1dChrZXkpIHtcclxuXHRcdC8vIEVhY2ggYmxvY2sgb24gdGhlIGNhbnZhcyBpcyBsYXllZCBhcyAxMDFweCo4M3B4XHJcblx0XHQvLyBzbyBjaGFyYWN0ZXIgbXVzdCBtb3ZlIHRoZSBzYW1lIHBpeGVsc1xyXG5cdFx0Ly8gdG8ga2VlcCBoaW0vaGVyIGNlbnRlcmVkIG9uIHRoZSBibG9ja1xyXG5cdFx0c3dpdGNoIChrZXkpIHtcclxuXHRcdGNhc2UgJ2xlZnQnOlxyXG5cdFx0XHQodGhpcy54ICE9PSAtMikgPyB0aGlzLnggLT0gdGlsZVdpZHRoIDogMTtcclxuXHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0Y2FzZSAndXAnOlxyXG5cdFx0XHQodGhpcy55ICE9PSAtNDApID8gdGhpcy55IC09IHRpbGVIZWlnaHQgOiAxO1xyXG5cdFx0XHRicmVhaztcclxuXHJcblx0XHRjYXNlICdkb3duJzpcclxuXHRcdFx0KHRoaXMueSAhPT0gMzc1KSA/IHRoaXMueSArPSB0aWxlSGVpZ2h0IDogMTtcclxuXHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0Y2FzZSAncmlnaHQnOlxyXG5cdFx0XHQodGhpcy54ICE9PSA0MDIpID8gdGhpcy54ICs9IHRpbGVXaWR0aCA6IDE7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcbi8vIEVuZW15IGFuZCBQTGF5ZXIgaW5zdGFuY2VzXHJcbmxldCBhbGxFbmVtaWVzID0gW25ldyBFbmVteSgxLjUsIDY0KSwgbmV3IEVuZW15KDMsIDY0LCAtNTUwKSwgbmV3IEVuZW15KDYsIDY0LCAtMTAwMCksXHJcblx0bmV3IEVuZW15KDIsIDE0NyksIG5ldyBFbmVteSgxLjIsIDE0NywgLTIwMCksIG5ldyBFbmVteSgzLCAxNDcsIC04MDApLFxyXG5cdG5ldyBFbmVteSgxLCAyMzApLCBuZXcgRW5lbXkoMi4yLCAyMzAsIC00NTApXTtcclxubGV0IHBsYXllciA9IG5ldyBQbGF5ZXIoKTtcclxuXHJcbi8vIERpbWVuc2lvbnMgZm9yIGV2ZXJ5IGJsb2NrIG9uIHRoZSBjYW52YXNcclxuY29uc3QgdGlsZVdpZHRoID0gMTAxLFxyXG5cdHRpbGVIZWlnaHQgPSA4MztcclxuXHJcbi8vIEtleXByZXNzIEhhbmRsZXJcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbihlKSB7XHJcblx0dmFyIGFsbG93ZWRLZXlzID0ge1xyXG5cdFx0Mzc6ICdsZWZ0JyxcclxuXHRcdDM4OiAndXAnLFxyXG5cdFx0Mzk6ICdyaWdodCcsXHJcblx0XHQ0MDogJ2Rvd24nXHJcblx0fTtcclxuXHJcblx0cGxheWVyLmhhbmRsZUlucHV0KGFsbG93ZWRLZXlzW2Uua2V5Q29kZV0pO1xyXG59KTtcclxuXHJcblxyXG4vLyBGdW5jdGlvbnNcclxuXHJcbmZ1bmN0aW9uIGNoZWNrQ29sbGlzaW9uKGVuZW15KXtcclxuXHQvLyBCeSBtYXBwaW5nIGEgcmVjdGFuZ2xlIGZvciB0aGUgZW5lbXkgZnJvbSBbeCB0byBlbmRYXSBhbmQgW3kgdG8gZW5kWV1cclxuXHQvLyBGb3IgcGxheWVyLCB0aGUgZmVldCdzIHBvc2l0aW9uIGlzIHRha2VuIGludG8gY29uc2lkZXJhdGlvblxyXG5cdGlmKHBsYXllci5mZWV0WCA8PSBlbmVteS5lbmRYICYmIHBsYXllci5mZWV0WCA+PSBlbmVteS54KSB7XHJcblx0XHRpZihwbGF5ZXIuZmVldFkgPD0gZW5lbXkuZW5kWSAmJiBwbGF5ZXIuZmVldFkgPj0gZW5lbXkueSkge1xyXG5cdFx0XHRyZXNldFBsYXllcigpO1xyXG5cdFx0XHRyZWR1Y2VMaXZlcygpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVzZXRQbGF5ZXIoKSB7XHJcblx0cGxheWVyLnggPSBwbGF5ZXIuc3RhcnRYO1xyXG5cdHBsYXllci55ID0gcGxheWVyLnN0YXJ0WTtcclxufVxyXG5cclxubGV0IGxpdmVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmEtaGVhcnQnKSk7XHJcbmxldCBpID0gbGl2ZXMubGVuZ3RoO1xyXG5mdW5jdGlvbiByZWR1Y2VMaXZlcygpIHtcclxuXHRpLS07XHJcblx0bGl2ZXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZmFzJyk7XHJcblx0bGl2ZXNbaV0uY2xhc3NMaXN0LmFkZCgnZmFyJyk7XHJcblx0Y2hlY2tMb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrV2luKCkge1xyXG5cdGlmKHBsYXllci55ID09IC00MCkge1xyXG5cdFx0Z2FtZVdpbigpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2FtZVdpbigpIHtcclxuXHRwbGF5ZXIud2luID0gdHJ1ZTtcclxuXHRudW0gPSAwOyAvLyB0byBhY3Qgb24gZmlyc3QgbW9kYWwgZnJvbSBhcnJheVxyXG5cdHNob3dNb2RhbCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0xvc2UoKSB7XHJcblx0aWYoaSA9PSAwKSB7XHJcblx0XHRnYW1lTG9zZSgpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2FtZUxvc2UoKSB7XHJcblx0cGxheWVyLmxvc2UgPSB0cnVlO1xyXG5cdG51bSA9IDE7IC8vIHRvIGFjdCBvbiBzZWNvbmQgbW9kYWwgZnJvbSBhcnJheVxyXG5cdHNob3dNb2RhbCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldExpdmVzKCkge1xyXG5cdGZvcihpID0gMDsgaSA8IGxpdmVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRsaXZlc1tpXS5jbGFzc0xpc3QuYWRkKCdmYXMnKTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2V0R2FtZSgpIHtcclxuXHRwbGF5ZXIud2luID0gZmFsc2U7XHJcblx0cGxheWVyLmxvc2UgPSBmYWxzZTtcclxuXHRyZXNldFBsYXllcigpO1xyXG5cdHJlc2V0TGl2ZXMoKTtcclxuXHRoaWRlTW9kYWwoKTtcclxuXHRFbmdpbmUuc3RhcnQoKTtcclxufVxyXG5cclxuY29uc3QgbW9kYWxCYWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWJhY2snKSxcclxuXHRtb2RhbEJvZHkgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC1ib2R5JykpLCAvLyBib3RoIG1vZGFscyBhZGRlZCB0byBhcnJheVxyXG5cdGNsb3NlQnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNsb3NlJykpLFxyXG5cdHJlc2V0QnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlc2V0JykpO1xyXG5sZXQgbnVtO1xyXG4vLyAnbnVtJyB3aWxsIHN0YXRlIHdoaWNoIG1vZGFsIGlzIGluIHBlcnNwZWN0aXZlIGZvciBhbmltYXRpbmcsIHNob3dNb2RhbCwgaGlkZU1vZGFsLCBhbmQgdG9nZ2xlTGlzdGVuZXJzXHJcbi8vIGl0IHdpbGwgY29udHJpYnV0ZSB0byBnb29kIHBlcmZvcm1hbmNlIGJlY2F1c2Ugb25seSB0aGUgbW9kYWwgd2Ugd2FudCB3aWxsIGhhdmUgY2xhc3NlcyBhbmQgbGlzdGVuZXJzIGFkZGVkLlxyXG5cclxuZnVuY3Rpb24gc2hvd01vZGFsKCkge1xyXG5cdG1vZGFsQmFjay5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XHJcblxyXG5cdC8vIGRpc3BsYXkgd2luIG1vZGFsIG9yIGxvc2UgbW9kYWxcclxuXHRtb2RhbEJvZHlbbnVtXS5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XHJcblxyXG5cdC8vIGVudHJ5IGFuaW1hdGlvbiBmb3IgbW9kYWwgaW4gcGVyc3BlY3RpdmVcclxuXHQobnVtID09IDApID8gbW9kYWxCb2R5W251bV0uY2xhc3NMaXN0LmFkZCgndGFkYScpIDogbW9kYWxCb2R5W251bV0uY2xhc3NMaXN0LmFkZCgnd29iYmxlJyk7XHJcblxyXG5cdC8vIHRvIGRpc3BsYXkgbGl2ZXMgZGlyZWN0bHkgZmV0Y2ggZnJvbSBzY29yZS1wYW5lbFxyXG5cdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50JykuaW5uZXJIVE1MID1cclxuXHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NvcmUtcGFuZWwnKS5pbm5lckhUTUw7XHJcblxyXG5cdC8vIGFkZCBldmVudCBsaXN0ZW5lcnNcclxuXHR0b2dnbGVMaXN0ZW5lcnMoJ29uJyk7XHJcblxyXG5cdC8vIGZvY3VzIG9uIHJlc2V0IGJ1dHRvbiBpbiByZXNwZWN0aXZlIG1vZGFsXHJcblx0cmVzZXRCdXR0b25zW251bV0uZm9jdXMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGlkZU1vZGFsKCkge1xyXG5cdG1vZGFsQm9keVtudW1dLmNsYXNzTGlzdC5hZGQoJ2JvdW5jZU91dCcpOyAvLyBleGl0IGFuaW1hdGlvblxyXG5cclxuXHQvLyB0byBhbGxvdyB0aW1lIGZvciBhbmltYXRpb25cclxuXHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdG1vZGFsQm9keVtudW1dLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnLCAndGFkYScsICd3b2JibGUnLCAnYm91bmNlT3V0Jyk7XHJcblx0XHRtb2RhbEJhY2suY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xyXG5cdH0sNzgwKTtcclxuXHJcblx0Ly8gcmVtb3ZlIGV2ZW50IGxpc3RlbmVyc1xyXG5cdHRvZ2dsZUxpc3RlbmVycygnb2ZmJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUxpc3RlbmVycyhzdykge1xyXG5cdHN3aXRjaCAoc3cpIHtcclxuXHRjYXNlICdvbic6XHJcblx0XHRjbG9zZUJ1dHRvbnNbbnVtXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVNb2RhbCk7XHJcblx0XHRyZXNldEJ1dHRvbnNbbnVtXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlc2V0R2FtZSk7XHJcblx0XHRicmVhaztcclxuXHJcblx0Y2FzZSAnb2ZmJzpcclxuXHRcdGNsb3NlQnV0dG9uc1tudW1dLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZU1vZGFsKTtcclxuXHRcdHJlc2V0QnV0dG9uc1tudW1dLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVzZXRHYW1lKTtcclxuXHR9XHJcbn0iXX0=
